<html>
<head>
<title>python.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #7a7e85;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
python.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot; 
    pygments.lexers.python 
    ~~~~~~~~~~~~~~~~~~~~~~ 
 
    Lexers for Python and related languages. 
 
    :copyright: Copyright 2006-2023 by the Pygments team, see AUTHORS. 
    :license: BSD, see LICENSE for details. 
&quot;&quot;&quot;</span>

<span class="s2">import </span><span class="s1">re</span>
<span class="s2">import </span><span class="s1">keyword</span>

<span class="s2">from </span><span class="s1">pip</span><span class="s3">.</span><span class="s1">_vendor</span><span class="s3">.</span><span class="s1">pygments</span><span class="s3">.</span><span class="s1">lexer </span><span class="s2">import </span><span class="s1">DelegatingLexer</span><span class="s3">, </span><span class="s1">Lexer</span><span class="s3">, </span><span class="s1">RegexLexer</span><span class="s3">, </span><span class="s1">include</span><span class="s3">, </span><span class="s1">\</span>
    <span class="s1">bygroups</span><span class="s3">, </span><span class="s1">using</span><span class="s3">, </span><span class="s1">default</span><span class="s3">, </span><span class="s1">words</span><span class="s3">, </span><span class="s1">combined</span><span class="s3">, </span><span class="s1">do_insertions</span><span class="s3">, </span><span class="s1">this</span><span class="s3">, </span><span class="s1">line_re</span>
<span class="s2">from </span><span class="s1">pip</span><span class="s3">.</span><span class="s1">_vendor</span><span class="s3">.</span><span class="s1">pygments</span><span class="s3">.</span><span class="s1">util </span><span class="s2">import </span><span class="s1">get_bool_opt</span><span class="s3">, </span><span class="s1">shebang_matches</span>
<span class="s2">from </span><span class="s1">pip</span><span class="s3">.</span><span class="s1">_vendor</span><span class="s3">.</span><span class="s1">pygments</span><span class="s3">.</span><span class="s1">token </span><span class="s2">import </span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Comment</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s1">\</span>
    <span class="s1">Number</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">, </span><span class="s1">Generic</span><span class="s3">, </span><span class="s1">Other</span><span class="s3">, </span><span class="s1">Error</span><span class="s3">, </span><span class="s1">Whitespace</span>
<span class="s2">from </span><span class="s1">pip</span><span class="s3">.</span><span class="s1">_vendor</span><span class="s3">.</span><span class="s1">pygments </span><span class="s2">import </span><span class="s1">unistring </span><span class="s2">as </span><span class="s1">uni</span>

<span class="s1">__all__ </span><span class="s3">= [</span><span class="s4">'PythonLexer'</span><span class="s3">, </span><span class="s4">'PythonConsoleLexer'</span><span class="s3">, </span><span class="s4">'PythonTracebackLexer'</span><span class="s3">,</span>
           <span class="s4">'Python2Lexer'</span><span class="s3">, </span><span class="s4">'Python2TracebackLexer'</span><span class="s3">,</span>
           <span class="s4">'CythonLexer'</span><span class="s3">, </span><span class="s4">'DgLexer'</span><span class="s3">, </span><span class="s4">'NumPyLexer'</span><span class="s3">]</span>


<span class="s2">class </span><span class="s1">PythonLexer</span><span class="s3">(</span><span class="s1">RegexLexer</span><span class="s3">):</span>
    <span class="s0">&quot;&quot;&quot; 
    For Python source code (version 3.x). 
 
    .. versionadded:: 0.10 
 
    .. versionchanged:: 2.5 
       This is now the default ``PythonLexer``.  It is still available as the 
       alias ``Python3Lexer``. 
    &quot;&quot;&quot;</span>

    <span class="s1">name </span><span class="s3">= </span><span class="s4">'Python'</span>
    <span class="s1">url </span><span class="s3">= </span><span class="s4">'http://www.python.org'</span>
    <span class="s1">aliases </span><span class="s3">= [</span><span class="s4">'python'</span><span class="s3">, </span><span class="s4">'py'</span><span class="s3">, </span><span class="s4">'sage'</span><span class="s3">, </span><span class="s4">'python3'</span><span class="s3">, </span><span class="s4">'py3'</span><span class="s3">]</span>
    <span class="s1">filenames </span><span class="s3">= [</span>
        <span class="s4">'*.py'</span><span class="s3">,</span>
        <span class="s4">'*.pyw'</span><span class="s3">,</span>
        <span class="s5"># Type stubs</span>
        <span class="s4">'*.pyi'</span><span class="s3">,</span>
        <span class="s5"># Jython</span>
        <span class="s4">'*.jy'</span><span class="s3">,</span>
        <span class="s5"># Sage</span>
        <span class="s4">'*.sage'</span><span class="s3">,</span>
        <span class="s5"># SCons</span>
        <span class="s4">'*.sc'</span><span class="s3">,</span>
        <span class="s4">'SConstruct'</span><span class="s3">,</span>
        <span class="s4">'SConscript'</span><span class="s3">,</span>
        <span class="s5"># Skylark/Starlark (used by Bazel, Buck, and Pants)</span>
        <span class="s4">'*.bzl'</span><span class="s3">,</span>
        <span class="s4">'BUCK'</span><span class="s3">,</span>
        <span class="s4">'BUILD'</span><span class="s3">,</span>
        <span class="s4">'BUILD.bazel'</span><span class="s3">,</span>
        <span class="s4">'WORKSPACE'</span><span class="s3">,</span>
        <span class="s5"># Twisted Application infrastructure</span>
        <span class="s4">'*.tac'</span><span class="s3">,</span>
    <span class="s3">]</span>
    <span class="s1">mimetypes </span><span class="s3">= [</span><span class="s4">'text/x-python'</span><span class="s3">, </span><span class="s4">'application/x-python'</span><span class="s3">,</span>
                 <span class="s4">'text/x-python3'</span><span class="s3">, </span><span class="s4">'application/x-python3'</span><span class="s3">]</span>

    <span class="s1">uni_name </span><span class="s3">= </span><span class="s4">&quot;[%s][%s]*&quot; </span><span class="s3">% (</span><span class="s1">uni</span><span class="s3">.</span><span class="s1">xid_start</span><span class="s3">, </span><span class="s1">uni</span><span class="s3">.</span><span class="s1">xid_continue</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">innerstring_rules</span><span class="s3">(</span><span class="s1">ttype</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s3">[</span>
            <span class="s5"># the old style '%s' % (...) string formatting (still valid in Py3)</span>
            <span class="s3">(</span><span class="s4">r'%(\(\w+\))?[-#0 +]*([0-9]+|[*])?(\.([0-9]+|[*]))?'</span>
             <span class="s4">'[hlL]?[E-GXc-giorsaux%]'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Interpol</span><span class="s3">),</span>
            <span class="s5"># the new style '{}'.format(...) string formatting</span>
            <span class="s3">(</span><span class="s4">r'\{'</span>
             <span class="s4">r'((\w+)((\.\w+)|(\[[^\]]+\]))*)?'  </span><span class="s5"># field name</span>
             <span class="s4">r'(\![sra])?'                       </span><span class="s5"># conversion</span>
             <span class="s4">r'(\:(.?[&lt;&gt;=\^])?[-+ ]?#?0?(\d+)?,?(\.\d+)?[E-GXb-gnosx%]?)?'</span>
             <span class="s4">r'\}'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Interpol</span><span class="s3">),</span>

            <span class="s5"># backslashes, quotes and formatting signs must be parsed one at a time</span>
            <span class="s3">(</span><span class="s4">r'[^\\\'&quot;%{\n]+'</span><span class="s3">, </span><span class="s1">ttype</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[\'&quot;\\]'</span><span class="s3">, </span><span class="s1">ttype</span><span class="s3">),</span>
            <span class="s5"># unhandled string formatting sign</span>
            <span class="s3">(</span><span class="s4">r'%|(\{{1,2})'</span><span class="s3">, </span><span class="s1">ttype</span><span class="s3">)</span>
            <span class="s5"># newlines are an error (use &quot;nl&quot; state)</span>
        <span class="s3">]</span>

    <span class="s2">def </span><span class="s1">fstring_rules</span><span class="s3">(</span><span class="s1">ttype</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s3">[</span>
            <span class="s5"># Assuming that a '}' is the closing brace after format specifier.</span>
            <span class="s5"># Sadly, this means that we won't detect syntax error. But it's</span>
            <span class="s5"># more important to parse correct syntax correctly, than to</span>
            <span class="s5"># highlight invalid syntax.</span>
            <span class="s3">(</span><span class="s4">r'\}'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Interpol</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\{'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Interpol</span><span class="s3">, </span><span class="s4">'expr-inside-fstring'</span><span class="s3">),</span>
            <span class="s5"># backslashes, quotes and formatting signs must be parsed one at a time</span>
            <span class="s3">(</span><span class="s4">r'[^\\\'&quot;{}\n]+'</span><span class="s3">, </span><span class="s1">ttype</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[\'&quot;\\]'</span><span class="s3">, </span><span class="s1">ttype</span><span class="s3">),</span>
            <span class="s5"># newlines are an error (use &quot;nl&quot; state)</span>
        <span class="s3">]</span>

    <span class="s1">tokens </span><span class="s3">= {</span>
        <span class="s4">'root'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^(\s*)([rRuUbB]{,2})(&quot;&quot;&quot;(?:.|\n)*?&quot;&quot;&quot;)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Whitespace</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Doc</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r&quot;^(\s*)([rRuUbB]{,2})('''(?:.|\n)*?''')&quot;</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Whitespace</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Doc</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'\A#!.+$'</span><span class="s3">, </span><span class="s1">Comment</span><span class="s3">.</span><span class="s1">Hashbang</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'#.*$'</span><span class="s3">, </span><span class="s1">Comment</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\\\n'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\\'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'keywords'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'soft-keywords'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(def)((?:\s|\\\s)+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">), </span><span class="s4">'funcname'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(class)((?:\s|\\\s)+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">), </span><span class="s4">'classname'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(from)((?:\s|\\\s)+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
             <span class="s4">'fromimport'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(import)((?:\s|\\\s)+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
             <span class="s4">'import'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'expr'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'expr'</span><span class="s3">: [</span>
            <span class="s5"># raw f-strings</span>
            <span class="s3">(</span><span class="s4">'(?i)(rf|fr)(&quot;&quot;&quot;)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'rfstringescape'</span><span class="s3">, </span><span class="s4">'tdqf'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;(?i)(rf|fr)(''')&quot;</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'rfstringescape'</span><span class="s3">, </span><span class="s4">'tsqf'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">'(?i)(rf|fr)(&quot;)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'rfstringescape'</span><span class="s3">, </span><span class="s4">'dqf'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;(?i)(rf|fr)(')&quot;</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'rfstringescape'</span><span class="s3">, </span><span class="s4">'sqf'</span><span class="s3">)),</span>
            <span class="s5"># non-raw f-strings</span>
            <span class="s3">(</span><span class="s4">'([fF])(&quot;&quot;&quot;)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'fstringescape'</span><span class="s3">, </span><span class="s4">'tdqf'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;([fF])(''')&quot;</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'fstringescape'</span><span class="s3">, </span><span class="s4">'tsqf'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">'([fF])(&quot;)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'fstringescape'</span><span class="s3">, </span><span class="s4">'dqf'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;([fF])(')&quot;</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'fstringescape'</span><span class="s3">, </span><span class="s4">'sqf'</span><span class="s3">)),</span>
            <span class="s5"># raw bytes and strings</span>
            <span class="s3">(</span><span class="s4">'(?i)(rb|br|r)(&quot;&quot;&quot;)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">), </span><span class="s4">'tdqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">&quot;(?i)(rb|br|r)(''')&quot;</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">), </span><span class="s4">'tsqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">'(?i)(rb|br|r)(&quot;)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">), </span><span class="s4">'dqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">&quot;(?i)(rb|br|r)(')&quot;</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">), </span><span class="s4">'sqs'</span><span class="s3">),</span>
            <span class="s5"># non-raw strings</span>
            <span class="s3">(</span><span class="s4">'([uU]?)(&quot;&quot;&quot;)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'tdqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;([uU]?)(''')&quot;</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'tsqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">'([uU]?)(&quot;)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'dqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;([uU]?)(')&quot;</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'sqs'</span><span class="s3">)),</span>
            <span class="s5"># non-raw bytes</span>
            <span class="s3">(</span><span class="s4">'([bB])(&quot;&quot;&quot;)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'bytesescape'</span><span class="s3">, </span><span class="s4">'tdqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;([bB])(''')&quot;</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'bytesescape'</span><span class="s3">, </span><span class="s4">'tsqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">'([bB])(&quot;)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'bytesescape'</span><span class="s3">, </span><span class="s4">'dqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;([bB])(')&quot;</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'bytesescape'</span><span class="s3">, </span><span class="s4">'sqs'</span><span class="s3">)),</span>

            <span class="s3">(</span><span class="s4">r'[^\S\n]+'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'numbers'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'!=|==|&lt;&lt;|&gt;&gt;|:=|[-~+/*%=&lt;&gt;&amp;^|.]'</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[]{}:(),;[]'</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(in|is|and|or|not)\b'</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">.</span><span class="s1">Word</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'expr-keywords'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'builtins'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'magicfuncs'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'magicvars'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'name'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'expr-inside-fstring'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'[{([]'</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">, </span><span class="s4">'expr-inside-fstring-inner'</span><span class="s3">),</span>
            <span class="s5"># without format specifier</span>
            <span class="s3">(</span><span class="s4">r'(=\s*)?'         </span><span class="s5"># debug (https://bugs.python.org/issue36817)</span>
             <span class="s4">r'(\![sraf])?'     </span><span class="s5"># conversion</span>
             <span class="s4">r'\}'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Interpol</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s5"># with format specifier</span>
            <span class="s5"># we'll catch the remaining '}' in the outer scope</span>
            <span class="s3">(</span><span class="s4">r'(=\s*)?'         </span><span class="s5"># debug (https://bugs.python.org/issue36817)</span>
             <span class="s4">r'(\![sraf])?'     </span><span class="s5"># conversion</span>
             <span class="s4">r':'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Interpol</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\s+'</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">),  </span><span class="s5"># allow new lines</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'expr'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'expr-inside-fstring-inner'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'[{([]'</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">, </span><span class="s4">'expr-inside-fstring-inner'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[])}]'</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\s+'</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">),  </span><span class="s5"># allow new lines</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'expr'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'expr-keywords'</span><span class="s3">: [</span>
            <span class="s5"># Based on https://docs.python.org/3/reference/expressions.html</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'async for'</span><span class="s3">, </span><span class="s4">'await'</span><span class="s3">, </span><span class="s4">'else'</span><span class="s3">, </span><span class="s4">'for'</span><span class="s3">, </span><span class="s4">'if'</span><span class="s3">, </span><span class="s4">'lambda'</span><span class="s3">,</span>
                <span class="s4">'yield'</span><span class="s3">, </span><span class="s4">'yield from'</span><span class="s3">), </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Keyword</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span><span class="s4">'True'</span><span class="s3">, </span><span class="s4">'False'</span><span class="s3">, </span><span class="s4">'None'</span><span class="s3">), </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">), </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Constant</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'keywords'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'assert'</span><span class="s3">, </span><span class="s4">'async'</span><span class="s3">, </span><span class="s4">'await'</span><span class="s3">, </span><span class="s4">'break'</span><span class="s3">, </span><span class="s4">'continue'</span><span class="s3">, </span><span class="s4">'del'</span><span class="s3">, </span><span class="s4">'elif'</span><span class="s3">,</span>
                <span class="s4">'else'</span><span class="s3">, </span><span class="s4">'except'</span><span class="s3">, </span><span class="s4">'finally'</span><span class="s3">, </span><span class="s4">'for'</span><span class="s3">, </span><span class="s4">'global'</span><span class="s3">, </span><span class="s4">'if'</span><span class="s3">, </span><span class="s4">'lambda'</span><span class="s3">,</span>
                <span class="s4">'pass'</span><span class="s3">, </span><span class="s4">'raise'</span><span class="s3">, </span><span class="s4">'nonlocal'</span><span class="s3">, </span><span class="s4">'return'</span><span class="s3">, </span><span class="s4">'try'</span><span class="s3">, </span><span class="s4">'while'</span><span class="s3">, </span><span class="s4">'yield'</span><span class="s3">,</span>
                <span class="s4">'yield from'</span><span class="s3">, </span><span class="s4">'as'</span><span class="s3">, </span><span class="s4">'with'</span><span class="s3">), </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Keyword</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span><span class="s4">'True'</span><span class="s3">, </span><span class="s4">'False'</span><span class="s3">, </span><span class="s4">'None'</span><span class="s3">), </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">), </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Constant</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'soft-keywords'</span><span class="s3">: [</span>
            <span class="s5"># `match`, `case` and `_` soft keywords</span>
            <span class="s3">(</span><span class="s4">r'(^[ \t]*)'              </span><span class="s5"># at beginning of line + possible indentation</span>
             <span class="s4">r'(match|case)\b'         </span><span class="s5"># a possible keyword</span>
             <span class="s4">r'(?![ \t]*(?:'           </span><span class="s5"># not followed by...</span>
             <span class="s4">r'[:,;=^&amp;|@~)\]}]|(?:' </span><span class="s3">+  </span><span class="s5"># characters and keywords that mean this isn't</span>
             <span class="s4">r'|'</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">keyword</span><span class="s3">.</span><span class="s1">kwlist</span><span class="s3">) + </span><span class="s4">r')\b))'</span><span class="s3">,                 </span><span class="s5"># pattern matching</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">), </span><span class="s4">'soft-keywords-inner'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'soft-keywords-inner'</span><span class="s3">: [</span>
            <span class="s5"># optional `_` keyword</span>
            <span class="s3">(</span><span class="s4">r'(\s+)([^\n_]*)(_\b)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Whitespace</span><span class="s3">, </span><span class="s1">using</span><span class="s3">(</span><span class="s1">this</span><span class="s3">), </span><span class="s1">Keyword</span><span class="s3">)),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'builtins'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'__import__'</span><span class="s3">, </span><span class="s4">'abs'</span><span class="s3">, </span><span class="s4">'aiter'</span><span class="s3">, </span><span class="s4">'all'</span><span class="s3">, </span><span class="s4">'any'</span><span class="s3">, </span><span class="s4">'bin'</span><span class="s3">, </span><span class="s4">'bool'</span><span class="s3">, </span><span class="s4">'bytearray'</span><span class="s3">,</span>
                <span class="s4">'breakpoint'</span><span class="s3">, </span><span class="s4">'bytes'</span><span class="s3">, </span><span class="s4">'callable'</span><span class="s3">, </span><span class="s4">'chr'</span><span class="s3">, </span><span class="s4">'classmethod'</span><span class="s3">, </span><span class="s4">'compile'</span><span class="s3">,</span>
                <span class="s4">'complex'</span><span class="s3">, </span><span class="s4">'delattr'</span><span class="s3">, </span><span class="s4">'dict'</span><span class="s3">, </span><span class="s4">'dir'</span><span class="s3">, </span><span class="s4">'divmod'</span><span class="s3">, </span><span class="s4">'enumerate'</span><span class="s3">, </span><span class="s4">'eval'</span><span class="s3">,</span>
                <span class="s4">'filter'</span><span class="s3">, </span><span class="s4">'float'</span><span class="s3">, </span><span class="s4">'format'</span><span class="s3">, </span><span class="s4">'frozenset'</span><span class="s3">, </span><span class="s4">'getattr'</span><span class="s3">, </span><span class="s4">'globals'</span><span class="s3">,</span>
                <span class="s4">'hasattr'</span><span class="s3">, </span><span class="s4">'hash'</span><span class="s3">, </span><span class="s4">'hex'</span><span class="s3">, </span><span class="s4">'id'</span><span class="s3">, </span><span class="s4">'input'</span><span class="s3">, </span><span class="s4">'int'</span><span class="s3">, </span><span class="s4">'isinstance'</span><span class="s3">,</span>
                <span class="s4">'issubclass'</span><span class="s3">, </span><span class="s4">'iter'</span><span class="s3">, </span><span class="s4">'len'</span><span class="s3">, </span><span class="s4">'list'</span><span class="s3">, </span><span class="s4">'locals'</span><span class="s3">, </span><span class="s4">'map'</span><span class="s3">, </span><span class="s4">'max'</span><span class="s3">,</span>
                <span class="s4">'memoryview'</span><span class="s3">, </span><span class="s4">'min'</span><span class="s3">, </span><span class="s4">'next'</span><span class="s3">, </span><span class="s4">'object'</span><span class="s3">, </span><span class="s4">'oct'</span><span class="s3">, </span><span class="s4">'open'</span><span class="s3">, </span><span class="s4">'ord'</span><span class="s3">, </span><span class="s4">'pow'</span><span class="s3">,</span>
                <span class="s4">'print'</span><span class="s3">, </span><span class="s4">'property'</span><span class="s3">, </span><span class="s4">'range'</span><span class="s3">, </span><span class="s4">'repr'</span><span class="s3">, </span><span class="s4">'reversed'</span><span class="s3">, </span><span class="s4">'round'</span><span class="s3">, </span><span class="s4">'set'</span><span class="s3">,</span>
                <span class="s4">'setattr'</span><span class="s3">, </span><span class="s4">'slice'</span><span class="s3">, </span><span class="s4">'sorted'</span><span class="s3">, </span><span class="s4">'staticmethod'</span><span class="s3">, </span><span class="s4">'str'</span><span class="s3">, </span><span class="s4">'sum'</span><span class="s3">, </span><span class="s4">'super'</span><span class="s3">,</span>
                <span class="s4">'tuple'</span><span class="s3">, </span><span class="s4">'type'</span><span class="s3">, </span><span class="s4">'vars'</span><span class="s3">, </span><span class="s4">'zip'</span><span class="s3">), </span><span class="s1">prefix</span><span class="s3">=</span><span class="s4">r'(?&lt;!\.)'</span><span class="s3">, </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(?&lt;!\.)(self|Ellipsis|NotImplemented|cls)\b'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">.</span><span class="s1">Pseudo</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'ArithmeticError'</span><span class="s3">, </span><span class="s4">'AssertionError'</span><span class="s3">, </span><span class="s4">'AttributeError'</span><span class="s3">,</span>
                <span class="s4">'BaseException'</span><span class="s3">, </span><span class="s4">'BufferError'</span><span class="s3">, </span><span class="s4">'BytesWarning'</span><span class="s3">, </span><span class="s4">'DeprecationWarning'</span><span class="s3">,</span>
                <span class="s4">'EOFError'</span><span class="s3">, </span><span class="s4">'EnvironmentError'</span><span class="s3">, </span><span class="s4">'Exception'</span><span class="s3">, </span><span class="s4">'FloatingPointError'</span><span class="s3">,</span>
                <span class="s4">'FutureWarning'</span><span class="s3">, </span><span class="s4">'GeneratorExit'</span><span class="s3">, </span><span class="s4">'IOError'</span><span class="s3">, </span><span class="s4">'ImportError'</span><span class="s3">,</span>
                <span class="s4">'ImportWarning'</span><span class="s3">, </span><span class="s4">'IndentationError'</span><span class="s3">, </span><span class="s4">'IndexError'</span><span class="s3">, </span><span class="s4">'KeyError'</span><span class="s3">,</span>
                <span class="s4">'KeyboardInterrupt'</span><span class="s3">, </span><span class="s4">'LookupError'</span><span class="s3">, </span><span class="s4">'MemoryError'</span><span class="s3">, </span><span class="s4">'NameError'</span><span class="s3">,</span>
                <span class="s4">'NotImplementedError'</span><span class="s3">, </span><span class="s4">'OSError'</span><span class="s3">, </span><span class="s4">'OverflowError'</span><span class="s3">,</span>
                <span class="s4">'PendingDeprecationWarning'</span><span class="s3">, </span><span class="s4">'ReferenceError'</span><span class="s3">, </span><span class="s4">'ResourceWarning'</span><span class="s3">,</span>
                <span class="s4">'RuntimeError'</span><span class="s3">, </span><span class="s4">'RuntimeWarning'</span><span class="s3">, </span><span class="s4">'StopIteration'</span><span class="s3">,</span>
                <span class="s4">'SyntaxError'</span><span class="s3">, </span><span class="s4">'SyntaxWarning'</span><span class="s3">, </span><span class="s4">'SystemError'</span><span class="s3">, </span><span class="s4">'SystemExit'</span><span class="s3">,</span>
                <span class="s4">'TabError'</span><span class="s3">, </span><span class="s4">'TypeError'</span><span class="s3">, </span><span class="s4">'UnboundLocalError'</span><span class="s3">, </span><span class="s4">'UnicodeDecodeError'</span><span class="s3">,</span>
                <span class="s4">'UnicodeEncodeError'</span><span class="s3">, </span><span class="s4">'UnicodeError'</span><span class="s3">, </span><span class="s4">'UnicodeTranslateError'</span><span class="s3">,</span>
                <span class="s4">'UnicodeWarning'</span><span class="s3">, </span><span class="s4">'UserWarning'</span><span class="s3">, </span><span class="s4">'ValueError'</span><span class="s3">, </span><span class="s4">'VMSError'</span><span class="s3">,</span>
                <span class="s4">'Warning'</span><span class="s3">, </span><span class="s4">'WindowsError'</span><span class="s3">, </span><span class="s4">'ZeroDivisionError'</span><span class="s3">,</span>
                <span class="s5"># new builtin exceptions from PEP 3151</span>
                <span class="s4">'BlockingIOError'</span><span class="s3">, </span><span class="s4">'ChildProcessError'</span><span class="s3">, </span><span class="s4">'ConnectionError'</span><span class="s3">,</span>
                <span class="s4">'BrokenPipeError'</span><span class="s3">, </span><span class="s4">'ConnectionAbortedError'</span><span class="s3">, </span><span class="s4">'ConnectionRefusedError'</span><span class="s3">,</span>
                <span class="s4">'ConnectionResetError'</span><span class="s3">, </span><span class="s4">'FileExistsError'</span><span class="s3">, </span><span class="s4">'FileNotFoundError'</span><span class="s3">,</span>
                <span class="s4">'InterruptedError'</span><span class="s3">, </span><span class="s4">'IsADirectoryError'</span><span class="s3">, </span><span class="s4">'NotADirectoryError'</span><span class="s3">,</span>
                <span class="s4">'PermissionError'</span><span class="s3">, </span><span class="s4">'ProcessLookupError'</span><span class="s3">, </span><span class="s4">'TimeoutError'</span><span class="s3">,</span>
                <span class="s5"># others new in Python 3</span>
                <span class="s4">'StopAsyncIteration'</span><span class="s3">, </span><span class="s4">'ModuleNotFoundError'</span><span class="s3">, </span><span class="s4">'RecursionError'</span><span class="s3">,</span>
                <span class="s4">'EncodingWarning'</span><span class="s3">),</span>
                <span class="s1">prefix</span><span class="s3">=</span><span class="s4">r'(?&lt;!\.)'</span><span class="s3">, </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Exception</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'magicfuncs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'__abs__'</span><span class="s3">, </span><span class="s4">'__add__'</span><span class="s3">, </span><span class="s4">'__aenter__'</span><span class="s3">, </span><span class="s4">'__aexit__'</span><span class="s3">, </span><span class="s4">'__aiter__'</span><span class="s3">,</span>
                <span class="s4">'__and__'</span><span class="s3">, </span><span class="s4">'__anext__'</span><span class="s3">, </span><span class="s4">'__await__'</span><span class="s3">, </span><span class="s4">'__bool__'</span><span class="s3">, </span><span class="s4">'__bytes__'</span><span class="s3">,</span>
                <span class="s4">'__call__'</span><span class="s3">, </span><span class="s4">'__complex__'</span><span class="s3">, </span><span class="s4">'__contains__'</span><span class="s3">, </span><span class="s4">'__del__'</span><span class="s3">, </span><span class="s4">'__delattr__'</span><span class="s3">,</span>
                <span class="s4">'__delete__'</span><span class="s3">, </span><span class="s4">'__delitem__'</span><span class="s3">, </span><span class="s4">'__dir__'</span><span class="s3">, </span><span class="s4">'__divmod__'</span><span class="s3">, </span><span class="s4">'__enter__'</span><span class="s3">,</span>
                <span class="s4">'__eq__'</span><span class="s3">, </span><span class="s4">'__exit__'</span><span class="s3">, </span><span class="s4">'__float__'</span><span class="s3">, </span><span class="s4">'__floordiv__'</span><span class="s3">, </span><span class="s4">'__format__'</span><span class="s3">,</span>
                <span class="s4">'__ge__'</span><span class="s3">, </span><span class="s4">'__get__'</span><span class="s3">, </span><span class="s4">'__getattr__'</span><span class="s3">, </span><span class="s4">'__getattribute__'</span><span class="s3">,</span>
                <span class="s4">'__getitem__'</span><span class="s3">, </span><span class="s4">'__gt__'</span><span class="s3">, </span><span class="s4">'__hash__'</span><span class="s3">, </span><span class="s4">'__iadd__'</span><span class="s3">, </span><span class="s4">'__iand__'</span><span class="s3">,</span>
                <span class="s4">'__ifloordiv__'</span><span class="s3">, </span><span class="s4">'__ilshift__'</span><span class="s3">, </span><span class="s4">'__imatmul__'</span><span class="s3">, </span><span class="s4">'__imod__'</span><span class="s3">,</span>
                <span class="s4">'__imul__'</span><span class="s3">, </span><span class="s4">'__index__'</span><span class="s3">, </span><span class="s4">'__init__'</span><span class="s3">, </span><span class="s4">'__instancecheck__'</span><span class="s3">,</span>
                <span class="s4">'__int__'</span><span class="s3">, </span><span class="s4">'__invert__'</span><span class="s3">, </span><span class="s4">'__ior__'</span><span class="s3">, </span><span class="s4">'__ipow__'</span><span class="s3">, </span><span class="s4">'__irshift__'</span><span class="s3">,</span>
                <span class="s4">'__isub__'</span><span class="s3">, </span><span class="s4">'__iter__'</span><span class="s3">, </span><span class="s4">'__itruediv__'</span><span class="s3">, </span><span class="s4">'__ixor__'</span><span class="s3">, </span><span class="s4">'__le__'</span><span class="s3">,</span>
                <span class="s4">'__len__'</span><span class="s3">, </span><span class="s4">'__length_hint__'</span><span class="s3">, </span><span class="s4">'__lshift__'</span><span class="s3">, </span><span class="s4">'__lt__'</span><span class="s3">, </span><span class="s4">'__matmul__'</span><span class="s3">,</span>
                <span class="s4">'__missing__'</span><span class="s3">, </span><span class="s4">'__mod__'</span><span class="s3">, </span><span class="s4">'__mul__'</span><span class="s3">, </span><span class="s4">'__ne__'</span><span class="s3">, </span><span class="s4">'__neg__'</span><span class="s3">,</span>
                <span class="s4">'__new__'</span><span class="s3">, </span><span class="s4">'__next__'</span><span class="s3">, </span><span class="s4">'__or__'</span><span class="s3">, </span><span class="s4">'__pos__'</span><span class="s3">, </span><span class="s4">'__pow__'</span><span class="s3">,</span>
                <span class="s4">'__prepare__'</span><span class="s3">, </span><span class="s4">'__radd__'</span><span class="s3">, </span><span class="s4">'__rand__'</span><span class="s3">, </span><span class="s4">'__rdivmod__'</span><span class="s3">, </span><span class="s4">'__repr__'</span><span class="s3">,</span>
                <span class="s4">'__reversed__'</span><span class="s3">, </span><span class="s4">'__rfloordiv__'</span><span class="s3">, </span><span class="s4">'__rlshift__'</span><span class="s3">, </span><span class="s4">'__rmatmul__'</span><span class="s3">,</span>
                <span class="s4">'__rmod__'</span><span class="s3">, </span><span class="s4">'__rmul__'</span><span class="s3">, </span><span class="s4">'__ror__'</span><span class="s3">, </span><span class="s4">'__round__'</span><span class="s3">, </span><span class="s4">'__rpow__'</span><span class="s3">,</span>
                <span class="s4">'__rrshift__'</span><span class="s3">, </span><span class="s4">'__rshift__'</span><span class="s3">, </span><span class="s4">'__rsub__'</span><span class="s3">, </span><span class="s4">'__rtruediv__'</span><span class="s3">,</span>
                <span class="s4">'__rxor__'</span><span class="s3">, </span><span class="s4">'__set__'</span><span class="s3">, </span><span class="s4">'__setattr__'</span><span class="s3">, </span><span class="s4">'__setitem__'</span><span class="s3">, </span><span class="s4">'__str__'</span><span class="s3">,</span>
                <span class="s4">'__sub__'</span><span class="s3">, </span><span class="s4">'__subclasscheck__'</span><span class="s3">, </span><span class="s4">'__truediv__'</span><span class="s3">,</span>
                <span class="s4">'__xor__'</span><span class="s3">), </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Function</span><span class="s3">.</span><span class="s1">Magic</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'magicvars'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'__annotations__'</span><span class="s3">, </span><span class="s4">'__bases__'</span><span class="s3">, </span><span class="s4">'__class__'</span><span class="s3">, </span><span class="s4">'__closure__'</span><span class="s3">,</span>
                <span class="s4">'__code__'</span><span class="s3">, </span><span class="s4">'__defaults__'</span><span class="s3">, </span><span class="s4">'__dict__'</span><span class="s3">, </span><span class="s4">'__doc__'</span><span class="s3">, </span><span class="s4">'__file__'</span><span class="s3">,</span>
                <span class="s4">'__func__'</span><span class="s3">, </span><span class="s4">'__globals__'</span><span class="s3">, </span><span class="s4">'__kwdefaults__'</span><span class="s3">, </span><span class="s4">'__module__'</span><span class="s3">,</span>
                <span class="s4">'__mro__'</span><span class="s3">, </span><span class="s4">'__name__'</span><span class="s3">, </span><span class="s4">'__objclass__'</span><span class="s3">, </span><span class="s4">'__qualname__'</span><span class="s3">,</span>
                <span class="s4">'__self__'</span><span class="s3">, </span><span class="s4">'__slots__'</span><span class="s3">, </span><span class="s4">'__weakref__'</span><span class="s3">), </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Variable</span><span class="s3">.</span><span class="s1">Magic</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'numbers'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(\d(?:_?\d)*\.(?:\d(?:_?\d)*)?|(?:\d(?:_?\d)*)?\.\d(?:_?\d)*)'</span>
             <span class="s4">r'([eE][+-]?\d(?:_?\d)*)?'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Float</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\d(?:_?\d)*[eE][+-]?\d(?:_?\d)*j?'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Float</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'0[oO](?:_?[0-7])+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Oct</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'0[bB](?:_?[01])+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Bin</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'0[xX](?:_?[a-fA-F0-9])+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Hex</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\d(?:_?\d)*'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Integer</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'name'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'@' </span><span class="s3">+ </span><span class="s1">uni_name</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Decorator</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'@'</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">),  </span><span class="s5"># new matrix multiplication operator</span>
            <span class="s3">(</span><span class="s1">uni_name</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'funcname'</span><span class="s3">: [</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'magicfuncs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s1">uni_name</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Function</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'classname'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">uni_name</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Class</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'import'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(\s+)(as)(\s+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'\.'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s1">uni_name</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(\s*)(,)(\s*)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">)),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">)  </span><span class="s5"># all else: go back</span>
        <span class="s3">],</span>
        <span class="s4">'fromimport'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(\s+)(import)\b'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">), </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\.'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">),</span>
            <span class="s5"># if None occurs here, it's &quot;raise x from None&quot;, since None can</span>
            <span class="s5"># never be a module name</span>
            <span class="s3">(</span><span class="s4">r'None\b'</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Constant</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s1">uni_name</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'rfstringescape'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\{\{'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\}\}'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'fstringescape'</span><span class="s3">: [</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'rfstringescape'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'bytesescape'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\\([\\abfnrtv&quot;\']|\n|x[a-fA-F0-9]{2}|[0-7]{1,3})'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'stringescape'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\\(N\{.*?\}|u[a-fA-F0-9]{4}|U[a-fA-F0-9]{8})'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'bytesescape'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'fstrings-single'</span><span class="s3">: </span><span class="s1">fstring_rules</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
        <span class="s4">'fstrings-double'</span><span class="s3">: </span><span class="s1">fstring_rules</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
        <span class="s4">'strings-single'</span><span class="s3">: </span><span class="s1">innerstring_rules</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
        <span class="s4">'strings-double'</span><span class="s3">: </span><span class="s1">innerstring_rules</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
        <span class="s4">'dqf'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\\\\|\\&quot;|\\\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),  </span><span class="s5"># included here for raw strings</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'fstrings-double'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'sqf'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r&quot;'&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r&quot;\\\\|\\'|\\\n&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),  </span><span class="s5"># included here for raw strings</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'fstrings-single'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'dqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\\\\|\\&quot;|\\\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),  </span><span class="s5"># included here for raw strings</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings-double'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'sqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r&quot;'&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r&quot;\\\\|\\'|\\\n&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),  </span><span class="s5"># included here for raw strings</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings-single'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'tdqf'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'&quot;&quot;&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'fstrings-double'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'tsqf'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r&quot;'''&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'fstrings-single'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'tdqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'&quot;&quot;&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings-double'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'tsqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r&quot;'''&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings-single'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">)</span>
        <span class="s3">],</span>
    <span class="s3">}</span>

    <span class="s2">def </span><span class="s1">analyse_text</span><span class="s3">(</span><span class="s1">text</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">shebang_matches</span><span class="s3">(</span><span class="s1">text</span><span class="s3">, </span><span class="s4">r'pythonw?(3(\.\d)?)?'</span><span class="s3">) </span><span class="s2">or </span><span class="s1">\</span>
            <span class="s4">'import ' </span><span class="s2">in </span><span class="s1">text</span><span class="s3">[:</span><span class="s6">1000</span><span class="s3">]</span>


<span class="s1">Python3Lexer </span><span class="s3">= </span><span class="s1">PythonLexer</span>


<span class="s2">class </span><span class="s1">Python2Lexer</span><span class="s3">(</span><span class="s1">RegexLexer</span><span class="s3">):</span>
    <span class="s0">&quot;&quot;&quot; 
    For Python 2.x source code. 
 
    .. versionchanged:: 2.5 
       This class has been renamed from ``PythonLexer``.  ``PythonLexer`` now 
       refers to the Python 3 variant.  File name patterns like ``*.py`` have 
       been moved to Python 3 as well. 
    &quot;&quot;&quot;</span>

    <span class="s1">name </span><span class="s3">= </span><span class="s4">'Python 2.x'</span>
    <span class="s1">url </span><span class="s3">= </span><span class="s4">'http://www.python.org'</span>
    <span class="s1">aliases </span><span class="s3">= [</span><span class="s4">'python2'</span><span class="s3">, </span><span class="s4">'py2'</span><span class="s3">]</span>
    <span class="s1">filenames </span><span class="s3">= []  </span><span class="s5"># now taken over by PythonLexer (3.x)</span>
    <span class="s1">mimetypes </span><span class="s3">= [</span><span class="s4">'text/x-python2'</span><span class="s3">, </span><span class="s4">'application/x-python2'</span><span class="s3">]</span>

    <span class="s2">def </span><span class="s1">innerstring_rules</span><span class="s3">(</span><span class="s1">ttype</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s3">[</span>
            <span class="s5"># the old style '%s' % (...) string formatting</span>
            <span class="s3">(</span><span class="s4">r'%(\(\w+\))?[-#0 +]*([0-9]+|[*])?(\.([0-9]+|[*]))?'</span>
             <span class="s4">'[hlL]?[E-GXc-giorsux%]'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Interpol</span><span class="s3">),</span>
            <span class="s5"># backslashes, quotes and formatting signs must be parsed one at a time</span>
            <span class="s3">(</span><span class="s4">r'[^\\\'&quot;%\n]+'</span><span class="s3">, </span><span class="s1">ttype</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[\'&quot;\\]'</span><span class="s3">, </span><span class="s1">ttype</span><span class="s3">),</span>
            <span class="s5"># unhandled string formatting sign</span>
            <span class="s3">(</span><span class="s4">r'%'</span><span class="s3">, </span><span class="s1">ttype</span><span class="s3">),</span>
            <span class="s5"># newlines are an error (use &quot;nl&quot; state)</span>
        <span class="s3">]</span>

    <span class="s1">tokens </span><span class="s3">= {</span>
        <span class="s4">'root'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^(\s*)([rRuUbB]{,2})(&quot;&quot;&quot;(?:.|\n)*?&quot;&quot;&quot;)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Whitespace</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Doc</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r&quot;^(\s*)([rRuUbB]{,2})('''(?:.|\n)*?''')&quot;</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Whitespace</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Doc</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'[^\S\n]+'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\A#!.+$'</span><span class="s3">, </span><span class="s1">Comment</span><span class="s3">.</span><span class="s1">Hashbang</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'#.*$'</span><span class="s3">, </span><span class="s1">Comment</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[]{}:(),;[]'</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\\\n'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\\'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(in|is|and|or|not)\b'</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">.</span><span class="s1">Word</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'!=|==|&lt;&lt;|&gt;&gt;|[-~+/*%=&lt;&gt;&amp;^|.]'</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'keywords'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(def)((?:\s|\\\s)+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">), </span><span class="s4">'funcname'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(class)((?:\s|\\\s)+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">), </span><span class="s4">'classname'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(from)((?:\s|\\\s)+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
             <span class="s4">'fromimport'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(import)((?:\s|\\\s)+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
             <span class="s4">'import'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'builtins'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'magicfuncs'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'magicvars'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'backtick'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">'([rR]|[uUbB][rR]|[rR][uUbB])(&quot;&quot;&quot;)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">), </span><span class="s4">'tdqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">&quot;([rR]|[uUbB][rR]|[rR][uUbB])(''')&quot;</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">), </span><span class="s4">'tsqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">'([rR]|[uUbB][rR]|[rR][uUbB])(&quot;)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">), </span><span class="s4">'dqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">&quot;([rR]|[uUbB][rR]|[rR][uUbB])(')&quot;</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">), </span><span class="s4">'sqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">'([uUbB]?)(&quot;&quot;&quot;)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'tdqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;([uUbB]?)(''')&quot;</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'tsqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">'([uUbB]?)(&quot;)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'dqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;([uUbB]?)(')&quot;</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Affix</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
             <span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'sqs'</span><span class="s3">)),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'name'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'numbers'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'keywords'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'assert'</span><span class="s3">, </span><span class="s4">'break'</span><span class="s3">, </span><span class="s4">'continue'</span><span class="s3">, </span><span class="s4">'del'</span><span class="s3">, </span><span class="s4">'elif'</span><span class="s3">, </span><span class="s4">'else'</span><span class="s3">, </span><span class="s4">'except'</span><span class="s3">,</span>
                <span class="s4">'exec'</span><span class="s3">, </span><span class="s4">'finally'</span><span class="s3">, </span><span class="s4">'for'</span><span class="s3">, </span><span class="s4">'global'</span><span class="s3">, </span><span class="s4">'if'</span><span class="s3">, </span><span class="s4">'lambda'</span><span class="s3">, </span><span class="s4">'pass'</span><span class="s3">,</span>
                <span class="s4">'print'</span><span class="s3">, </span><span class="s4">'raise'</span><span class="s3">, </span><span class="s4">'return'</span><span class="s3">, </span><span class="s4">'try'</span><span class="s3">, </span><span class="s4">'while'</span><span class="s3">, </span><span class="s4">'yield'</span><span class="s3">,</span>
                <span class="s4">'yield from'</span><span class="s3">, </span><span class="s4">'as'</span><span class="s3">, </span><span class="s4">'with'</span><span class="s3">), </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Keyword</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'builtins'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'__import__'</span><span class="s3">, </span><span class="s4">'abs'</span><span class="s3">, </span><span class="s4">'all'</span><span class="s3">, </span><span class="s4">'any'</span><span class="s3">, </span><span class="s4">'apply'</span><span class="s3">, </span><span class="s4">'basestring'</span><span class="s3">, </span><span class="s4">'bin'</span><span class="s3">,</span>
                <span class="s4">'bool'</span><span class="s3">, </span><span class="s4">'buffer'</span><span class="s3">, </span><span class="s4">'bytearray'</span><span class="s3">, </span><span class="s4">'bytes'</span><span class="s3">, </span><span class="s4">'callable'</span><span class="s3">, </span><span class="s4">'chr'</span><span class="s3">, </span><span class="s4">'classmethod'</span><span class="s3">,</span>
                <span class="s4">'cmp'</span><span class="s3">, </span><span class="s4">'coerce'</span><span class="s3">, </span><span class="s4">'compile'</span><span class="s3">, </span><span class="s4">'complex'</span><span class="s3">, </span><span class="s4">'delattr'</span><span class="s3">, </span><span class="s4">'dict'</span><span class="s3">, </span><span class="s4">'dir'</span><span class="s3">, </span><span class="s4">'divmod'</span><span class="s3">,</span>
                <span class="s4">'enumerate'</span><span class="s3">, </span><span class="s4">'eval'</span><span class="s3">, </span><span class="s4">'execfile'</span><span class="s3">, </span><span class="s4">'exit'</span><span class="s3">, </span><span class="s4">'file'</span><span class="s3">, </span><span class="s4">'filter'</span><span class="s3">, </span><span class="s4">'float'</span><span class="s3">,</span>
                <span class="s4">'frozenset'</span><span class="s3">, </span><span class="s4">'getattr'</span><span class="s3">, </span><span class="s4">'globals'</span><span class="s3">, </span><span class="s4">'hasattr'</span><span class="s3">, </span><span class="s4">'hash'</span><span class="s3">, </span><span class="s4">'hex'</span><span class="s3">, </span><span class="s4">'id'</span><span class="s3">,</span>
                <span class="s4">'input'</span><span class="s3">, </span><span class="s4">'int'</span><span class="s3">, </span><span class="s4">'intern'</span><span class="s3">, </span><span class="s4">'isinstance'</span><span class="s3">, </span><span class="s4">'issubclass'</span><span class="s3">, </span><span class="s4">'iter'</span><span class="s3">, </span><span class="s4">'len'</span><span class="s3">,</span>
                <span class="s4">'list'</span><span class="s3">, </span><span class="s4">'locals'</span><span class="s3">, </span><span class="s4">'long'</span><span class="s3">, </span><span class="s4">'map'</span><span class="s3">, </span><span class="s4">'max'</span><span class="s3">, </span><span class="s4">'min'</span><span class="s3">, </span><span class="s4">'next'</span><span class="s3">, </span><span class="s4">'object'</span><span class="s3">,</span>
                <span class="s4">'oct'</span><span class="s3">, </span><span class="s4">'open'</span><span class="s3">, </span><span class="s4">'ord'</span><span class="s3">, </span><span class="s4">'pow'</span><span class="s3">, </span><span class="s4">'property'</span><span class="s3">, </span><span class="s4">'range'</span><span class="s3">, </span><span class="s4">'raw_input'</span><span class="s3">, </span><span class="s4">'reduce'</span><span class="s3">,</span>
                <span class="s4">'reload'</span><span class="s3">, </span><span class="s4">'repr'</span><span class="s3">, </span><span class="s4">'reversed'</span><span class="s3">, </span><span class="s4">'round'</span><span class="s3">, </span><span class="s4">'set'</span><span class="s3">, </span><span class="s4">'setattr'</span><span class="s3">, </span><span class="s4">'slice'</span><span class="s3">,</span>
                <span class="s4">'sorted'</span><span class="s3">, </span><span class="s4">'staticmethod'</span><span class="s3">, </span><span class="s4">'str'</span><span class="s3">, </span><span class="s4">'sum'</span><span class="s3">, </span><span class="s4">'super'</span><span class="s3">, </span><span class="s4">'tuple'</span><span class="s3">, </span><span class="s4">'type'</span><span class="s3">,</span>
                <span class="s4">'unichr'</span><span class="s3">, </span><span class="s4">'unicode'</span><span class="s3">, </span><span class="s4">'vars'</span><span class="s3">, </span><span class="s4">'xrange'</span><span class="s3">, </span><span class="s4">'zip'</span><span class="s3">),</span>
                <span class="s1">prefix</span><span class="s3">=</span><span class="s4">r'(?&lt;!\.)'</span><span class="s3">, </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(?&lt;!\.)(self|None|Ellipsis|NotImplemented|False|True|cls'</span>
             <span class="s4">r')\b'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">.</span><span class="s1">Pseudo</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'ArithmeticError'</span><span class="s3">, </span><span class="s4">'AssertionError'</span><span class="s3">, </span><span class="s4">'AttributeError'</span><span class="s3">,</span>
                <span class="s4">'BaseException'</span><span class="s3">, </span><span class="s4">'DeprecationWarning'</span><span class="s3">, </span><span class="s4">'EOFError'</span><span class="s3">, </span><span class="s4">'EnvironmentError'</span><span class="s3">,</span>
                <span class="s4">'Exception'</span><span class="s3">, </span><span class="s4">'FloatingPointError'</span><span class="s3">, </span><span class="s4">'FutureWarning'</span><span class="s3">, </span><span class="s4">'GeneratorExit'</span><span class="s3">,</span>
                <span class="s4">'IOError'</span><span class="s3">, </span><span class="s4">'ImportError'</span><span class="s3">, </span><span class="s4">'ImportWarning'</span><span class="s3">, </span><span class="s4">'IndentationError'</span><span class="s3">,</span>
                <span class="s4">'IndexError'</span><span class="s3">, </span><span class="s4">'KeyError'</span><span class="s3">, </span><span class="s4">'KeyboardInterrupt'</span><span class="s3">, </span><span class="s4">'LookupError'</span><span class="s3">,</span>
                <span class="s4">'MemoryError'</span><span class="s3">, </span><span class="s4">'NameError'</span><span class="s3">,</span>
                <span class="s4">'NotImplementedError'</span><span class="s3">, </span><span class="s4">'OSError'</span><span class="s3">, </span><span class="s4">'OverflowError'</span><span class="s3">, </span><span class="s4">'OverflowWarning'</span><span class="s3">,</span>
                <span class="s4">'PendingDeprecationWarning'</span><span class="s3">, </span><span class="s4">'ReferenceError'</span><span class="s3">,</span>
                <span class="s4">'RuntimeError'</span><span class="s3">, </span><span class="s4">'RuntimeWarning'</span><span class="s3">, </span><span class="s4">'StandardError'</span><span class="s3">, </span><span class="s4">'StopIteration'</span><span class="s3">,</span>
                <span class="s4">'SyntaxError'</span><span class="s3">, </span><span class="s4">'SyntaxWarning'</span><span class="s3">, </span><span class="s4">'SystemError'</span><span class="s3">, </span><span class="s4">'SystemExit'</span><span class="s3">,</span>
                <span class="s4">'TabError'</span><span class="s3">, </span><span class="s4">'TypeError'</span><span class="s3">, </span><span class="s4">'UnboundLocalError'</span><span class="s3">, </span><span class="s4">'UnicodeDecodeError'</span><span class="s3">,</span>
                <span class="s4">'UnicodeEncodeError'</span><span class="s3">, </span><span class="s4">'UnicodeError'</span><span class="s3">, </span><span class="s4">'UnicodeTranslateError'</span><span class="s3">,</span>
                <span class="s4">'UnicodeWarning'</span><span class="s3">, </span><span class="s4">'UserWarning'</span><span class="s3">, </span><span class="s4">'ValueError'</span><span class="s3">, </span><span class="s4">'VMSError'</span><span class="s3">, </span><span class="s4">'Warning'</span><span class="s3">,</span>
                <span class="s4">'WindowsError'</span><span class="s3">, </span><span class="s4">'ZeroDivisionError'</span><span class="s3">), </span><span class="s1">prefix</span><span class="s3">=</span><span class="s4">r'(?&lt;!\.)'</span><span class="s3">, </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Exception</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'magicfuncs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'__abs__'</span><span class="s3">, </span><span class="s4">'__add__'</span><span class="s3">, </span><span class="s4">'__and__'</span><span class="s3">, </span><span class="s4">'__call__'</span><span class="s3">, </span><span class="s4">'__cmp__'</span><span class="s3">, </span><span class="s4">'__coerce__'</span><span class="s3">,</span>
                <span class="s4">'__complex__'</span><span class="s3">, </span><span class="s4">'__contains__'</span><span class="s3">, </span><span class="s4">'__del__'</span><span class="s3">, </span><span class="s4">'__delattr__'</span><span class="s3">, </span><span class="s4">'__delete__'</span><span class="s3">,</span>
                <span class="s4">'__delitem__'</span><span class="s3">, </span><span class="s4">'__delslice__'</span><span class="s3">, </span><span class="s4">'__div__'</span><span class="s3">, </span><span class="s4">'__divmod__'</span><span class="s3">, </span><span class="s4">'__enter__'</span><span class="s3">,</span>
                <span class="s4">'__eq__'</span><span class="s3">, </span><span class="s4">'__exit__'</span><span class="s3">, </span><span class="s4">'__float__'</span><span class="s3">, </span><span class="s4">'__floordiv__'</span><span class="s3">, </span><span class="s4">'__ge__'</span><span class="s3">, </span><span class="s4">'__get__'</span><span class="s3">,</span>
                <span class="s4">'__getattr__'</span><span class="s3">, </span><span class="s4">'__getattribute__'</span><span class="s3">, </span><span class="s4">'__getitem__'</span><span class="s3">, </span><span class="s4">'__getslice__'</span><span class="s3">, </span><span class="s4">'__gt__'</span><span class="s3">,</span>
                <span class="s4">'__hash__'</span><span class="s3">, </span><span class="s4">'__hex__'</span><span class="s3">, </span><span class="s4">'__iadd__'</span><span class="s3">, </span><span class="s4">'__iand__'</span><span class="s3">, </span><span class="s4">'__idiv__'</span><span class="s3">, </span><span class="s4">'__ifloordiv__'</span><span class="s3">,</span>
                <span class="s4">'__ilshift__'</span><span class="s3">, </span><span class="s4">'__imod__'</span><span class="s3">, </span><span class="s4">'__imul__'</span><span class="s3">, </span><span class="s4">'__index__'</span><span class="s3">, </span><span class="s4">'__init__'</span><span class="s3">,</span>
                <span class="s4">'__instancecheck__'</span><span class="s3">, </span><span class="s4">'__int__'</span><span class="s3">, </span><span class="s4">'__invert__'</span><span class="s3">, </span><span class="s4">'__iop__'</span><span class="s3">, </span><span class="s4">'__ior__'</span><span class="s3">,</span>
                <span class="s4">'__ipow__'</span><span class="s3">, </span><span class="s4">'__irshift__'</span><span class="s3">, </span><span class="s4">'__isub__'</span><span class="s3">, </span><span class="s4">'__iter__'</span><span class="s3">, </span><span class="s4">'__itruediv__'</span><span class="s3">,</span>
                <span class="s4">'__ixor__'</span><span class="s3">, </span><span class="s4">'__le__'</span><span class="s3">, </span><span class="s4">'__len__'</span><span class="s3">, </span><span class="s4">'__long__'</span><span class="s3">, </span><span class="s4">'__lshift__'</span><span class="s3">, </span><span class="s4">'__lt__'</span><span class="s3">,</span>
                <span class="s4">'__missing__'</span><span class="s3">, </span><span class="s4">'__mod__'</span><span class="s3">, </span><span class="s4">'__mul__'</span><span class="s3">, </span><span class="s4">'__ne__'</span><span class="s3">, </span><span class="s4">'__neg__'</span><span class="s3">, </span><span class="s4">'__new__'</span><span class="s3">,</span>
                <span class="s4">'__nonzero__'</span><span class="s3">, </span><span class="s4">'__oct__'</span><span class="s3">, </span><span class="s4">'__op__'</span><span class="s3">, </span><span class="s4">'__or__'</span><span class="s3">, </span><span class="s4">'__pos__'</span><span class="s3">, </span><span class="s4">'__pow__'</span><span class="s3">,</span>
                <span class="s4">'__radd__'</span><span class="s3">, </span><span class="s4">'__rand__'</span><span class="s3">, </span><span class="s4">'__rcmp__'</span><span class="s3">, </span><span class="s4">'__rdiv__'</span><span class="s3">, </span><span class="s4">'__rdivmod__'</span><span class="s3">, </span><span class="s4">'__repr__'</span><span class="s3">,</span>
                <span class="s4">'__reversed__'</span><span class="s3">, </span><span class="s4">'__rfloordiv__'</span><span class="s3">, </span><span class="s4">'__rlshift__'</span><span class="s3">, </span><span class="s4">'__rmod__'</span><span class="s3">, </span><span class="s4">'__rmul__'</span><span class="s3">,</span>
                <span class="s4">'__rop__'</span><span class="s3">, </span><span class="s4">'__ror__'</span><span class="s3">, </span><span class="s4">'__rpow__'</span><span class="s3">, </span><span class="s4">'__rrshift__'</span><span class="s3">, </span><span class="s4">'__rshift__'</span><span class="s3">, </span><span class="s4">'__rsub__'</span><span class="s3">,</span>
                <span class="s4">'__rtruediv__'</span><span class="s3">, </span><span class="s4">'__rxor__'</span><span class="s3">, </span><span class="s4">'__set__'</span><span class="s3">, </span><span class="s4">'__setattr__'</span><span class="s3">, </span><span class="s4">'__setitem__'</span><span class="s3">,</span>
                <span class="s4">'__setslice__'</span><span class="s3">, </span><span class="s4">'__str__'</span><span class="s3">, </span><span class="s4">'__sub__'</span><span class="s3">, </span><span class="s4">'__subclasscheck__'</span><span class="s3">, </span><span class="s4">'__truediv__'</span><span class="s3">,</span>
                <span class="s4">'__unicode__'</span><span class="s3">, </span><span class="s4">'__xor__'</span><span class="s3">), </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Function</span><span class="s3">.</span><span class="s1">Magic</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'magicvars'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'__bases__'</span><span class="s3">, </span><span class="s4">'__class__'</span><span class="s3">, </span><span class="s4">'__closure__'</span><span class="s3">, </span><span class="s4">'__code__'</span><span class="s3">, </span><span class="s4">'__defaults__'</span><span class="s3">,</span>
                <span class="s4">'__dict__'</span><span class="s3">, </span><span class="s4">'__doc__'</span><span class="s3">, </span><span class="s4">'__file__'</span><span class="s3">, </span><span class="s4">'__func__'</span><span class="s3">, </span><span class="s4">'__globals__'</span><span class="s3">,</span>
                <span class="s4">'__metaclass__'</span><span class="s3">, </span><span class="s4">'__module__'</span><span class="s3">, </span><span class="s4">'__mro__'</span><span class="s3">, </span><span class="s4">'__name__'</span><span class="s3">, </span><span class="s4">'__self__'</span><span class="s3">,</span>
                <span class="s4">'__slots__'</span><span class="s3">, </span><span class="s4">'__weakref__'</span><span class="s3">),</span>
                <span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Variable</span><span class="s3">.</span><span class="s1">Magic</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'numbers'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(\d+\.\d*|\d*\.\d+)([eE][+-]?[0-9]+)?j?'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Float</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\d+[eE][+-]?[0-9]+j?'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Float</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'0[0-7]+j?'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Oct</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'0[bB][01]+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Bin</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'0[xX][a-fA-F0-9]+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Hex</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\d+L'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Integer</span><span class="s3">.</span><span class="s1">Long</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\d+j?'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Integer</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'backtick'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">'`.*?`'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Backtick</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'name'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'@[\w.]+'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Decorator</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_]\w*'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'funcname'</span><span class="s3">: [</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'magicfuncs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_]\w*'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Function</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'classname'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_]\w*'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Class</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'import'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(?:[ \t]|\\\n)+'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'as\b'</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r','</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_][\w.]*'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">)  </span><span class="s5"># all else: go back</span>
        <span class="s3">],</span>
        <span class="s4">'fromimport'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(?:[ \t]|\\\n)+'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'import\b'</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s5"># if None occurs here, it's &quot;raise x from None&quot;, since None can</span>
            <span class="s5"># never be a module name</span>
            <span class="s3">(</span><span class="s4">r'None\b'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">.</span><span class="s1">Pseudo</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s5"># sadly, in &quot;raise x from y&quot; y will be highlighted as namespace too</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_.][\w.]*'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">),</span>
            <span class="s5"># anything else here also means &quot;raise x from y&quot; and is therefore</span>
            <span class="s5"># not an error</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'stringescape'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\\([\\abfnrtv&quot;\']|\n|N\{.*?\}|u[a-fA-F0-9]{4}|'</span>
             <span class="s4">r'U[a-fA-F0-9]{8}|x[a-fA-F0-9]{2}|[0-7]{1,3})'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'strings-single'</span><span class="s3">: </span><span class="s1">innerstring_rules</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>
        <span class="s4">'strings-double'</span><span class="s3">: </span><span class="s1">innerstring_rules</span><span class="s3">(</span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">),</span>
        <span class="s4">'dqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\\\\|\\&quot;|\\\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),  </span><span class="s5"># included here for raw strings</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings-double'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'sqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r&quot;'&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r&quot;\\\\|\\'|\\\n&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),  </span><span class="s5"># included here for raw strings</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings-single'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'tdqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'&quot;&quot;&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings-double'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Double</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'tsqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r&quot;'''&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings-single'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">)</span>
        <span class="s3">],</span>
    <span class="s3">}</span>

    <span class="s2">def </span><span class="s1">analyse_text</span><span class="s3">(</span><span class="s1">text</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">shebang_matches</span><span class="s3">(</span><span class="s1">text</span><span class="s3">, </span><span class="s4">r'pythonw?2(\.\d)?'</span><span class="s3">)</span>

<span class="s2">class </span><span class="s1">_PythonConsoleLexerBase</span><span class="s3">(</span><span class="s1">RegexLexer</span><span class="s3">):</span>
    <span class="s1">name </span><span class="s3">= </span><span class="s4">'Python console session'</span>
    <span class="s1">aliases </span><span class="s3">= [</span><span class="s4">'pycon'</span><span class="s3">]</span>
    <span class="s1">mimetypes </span><span class="s3">= [</span><span class="s4">'text/x-python-doctest'</span><span class="s3">]</span>

    <span class="s4">&quot;&quot;&quot;Auxiliary lexer for `PythonConsoleLexer`. 
 
    Code tokens are output as ``Token.Other.Code``, traceback tokens as 
    ``Token.Other.Traceback``. 
    &quot;&quot;&quot;</span>
    <span class="s1">tokens </span><span class="s3">= {</span>
        <span class="s4">'root'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(&gt;&gt;&gt; )(.*\n)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Prompt</span><span class="s3">, </span><span class="s1">Other</span><span class="s3">.</span><span class="s1">Code</span><span class="s3">), </span><span class="s4">'continuations'</span><span class="s3">),</span>
            <span class="s5"># This happens, e.g., when tracebacks are embedded in documentation;</span>
            <span class="s5"># trailing whitespaces are often stripped in such contexts.</span>
            <span class="s3">(</span><span class="s4">r'(&gt;&gt;&gt;)(\n)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Prompt</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'(\^C)?Traceback \(most recent call last\):\n'</span><span class="s3">, </span><span class="s1">Other</span><span class="s3">.</span><span class="s1">Traceback</span><span class="s3">, </span><span class="s4">'traceback'</span><span class="s3">),</span>
            <span class="s5"># SyntaxError starts with this</span>
            <span class="s3">(</span><span class="s4">r'  File &quot;[^&quot;]+&quot;, line \d+'</span><span class="s3">, </span><span class="s1">Other</span><span class="s3">.</span><span class="s1">Traceback</span><span class="s3">, </span><span class="s4">'traceback'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'.*\n'</span><span class="s3">, </span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Output</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'continuations'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(\.\.\. )(.*\n)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Prompt</span><span class="s3">, </span><span class="s1">Other</span><span class="s3">.</span><span class="s1">Code</span><span class="s3">)),</span>
            <span class="s5"># See above.</span>
            <span class="s3">(</span><span class="s4">r'(\.\.\.)(\n)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Prompt</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">)),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'traceback'</span><span class="s3">: [</span>
            <span class="s5"># As soon as we see a traceback, consume everything until the next</span>
            <span class="s5"># &gt;&gt;&gt; prompt.</span>
            <span class="s3">(</span><span class="s4">r'(?=&gt;&gt;&gt;( |$))'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(KeyboardInterrupt)(\n)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Class</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'.*\n'</span><span class="s3">, </span><span class="s1">Other</span><span class="s3">.</span><span class="s1">Traceback</span><span class="s3">),</span>
        <span class="s3">],</span>
    <span class="s3">}</span>

<span class="s2">class </span><span class="s1">PythonConsoleLexer</span><span class="s3">(</span><span class="s1">DelegatingLexer</span><span class="s3">):</span>
    <span class="s0">&quot;&quot;&quot; 
    For Python console output or doctests, such as: 
 
    .. sourcecode:: pycon 
 
        &gt;&gt;&gt; a = 'foo' 
        &gt;&gt;&gt; print(a) 
        foo 
        &gt;&gt;&gt; 1 / 0 
        Traceback (most recent call last): 
          File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; 
        ZeroDivisionError: integer division or modulo by zero 
 
    Additional options: 
 
    `python3` 
        Use Python 3 lexer for code.  Default is ``True``. 
 
        .. versionadded:: 1.0 
        .. versionchanged:: 2.5 
           Now defaults to ``True``. 
    &quot;&quot;&quot;</span>

    <span class="s1">name </span><span class="s3">= </span><span class="s4">'Python console session'</span>
    <span class="s1">aliases </span><span class="s3">= [</span><span class="s4">'pycon'</span><span class="s3">]</span>
    <span class="s1">mimetypes </span><span class="s3">= [</span><span class="s4">'text/x-python-doctest'</span><span class="s3">]</span>

    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, **</span><span class="s1">options</span><span class="s3">):</span>
        <span class="s1">python3 </span><span class="s3">= </span><span class="s1">get_bool_opt</span><span class="s3">(</span><span class="s1">options</span><span class="s3">, </span><span class="s4">'python3'</span><span class="s3">, </span><span class="s2">True</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">python3</span><span class="s3">:</span>
            <span class="s1">pylexer </span><span class="s3">= </span><span class="s1">PythonLexer</span>
            <span class="s1">tblexer </span><span class="s3">= </span><span class="s1">PythonTracebackLexer</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">pylexer </span><span class="s3">= </span><span class="s1">Python2Lexer</span>
            <span class="s1">tblexer </span><span class="s3">= </span><span class="s1">Python2TracebackLexer</span>
        <span class="s5"># We have two auxiliary lexers. Use DelegatingLexer twice with</span>
        <span class="s5"># different tokens.  TODO: DelegatingLexer should support this</span>
        <span class="s5"># directly, by accepting a tuplet of auxiliary lexers and a tuple of</span>
        <span class="s5"># distinguishing tokens. Then we wouldn't need this intermediary</span>
        <span class="s5"># class.</span>
        <span class="s2">class </span><span class="s1">_ReplaceInnerCode</span><span class="s3">(</span><span class="s1">DelegatingLexer</span><span class="s3">):</span>
            <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, **</span><span class="s1">options</span><span class="s3">):</span>
                <span class="s1">super</span><span class="s3">().</span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">pylexer</span><span class="s3">, </span><span class="s1">_PythonConsoleLexerBase</span><span class="s3">, </span><span class="s1">Other</span><span class="s3">.</span><span class="s1">Code</span><span class="s3">, **</span><span class="s1">options</span><span class="s3">)</span>
        <span class="s1">super</span><span class="s3">().</span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">tblexer</span><span class="s3">, </span><span class="s1">_ReplaceInnerCode</span><span class="s3">, </span><span class="s1">Other</span><span class="s3">.</span><span class="s1">Traceback</span><span class="s3">, **</span><span class="s1">options</span><span class="s3">)</span>

<span class="s2">class </span><span class="s1">PythonTracebackLexer</span><span class="s3">(</span><span class="s1">RegexLexer</span><span class="s3">):</span>
    <span class="s0">&quot;&quot;&quot; 
    For Python 3.x tracebacks, with support for chained exceptions. 
 
    .. versionadded:: 1.0 
 
    .. versionchanged:: 2.5 
       This is now the default ``PythonTracebackLexer``.  It is still available 
       as the alias ``Python3TracebackLexer``. 
    &quot;&quot;&quot;</span>

    <span class="s1">name </span><span class="s3">= </span><span class="s4">'Python Traceback'</span>
    <span class="s1">aliases </span><span class="s3">= [</span><span class="s4">'pytb'</span><span class="s3">, </span><span class="s4">'py3tb'</span><span class="s3">]</span>
    <span class="s1">filenames </span><span class="s3">= [</span><span class="s4">'*.pytb'</span><span class="s3">, </span><span class="s4">'*.py3tb'</span><span class="s3">]</span>
    <span class="s1">mimetypes </span><span class="s3">= [</span><span class="s4">'text/x-python-traceback'</span><span class="s3">, </span><span class="s4">'text/x-python3-traceback'</span><span class="s3">]</span>

    <span class="s1">tokens </span><span class="s3">= {</span>
        <span class="s4">'root'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^(\^C)?Traceback \(most recent call last\):\n'</span><span class="s3">, </span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Traceback</span><span class="s3">, </span><span class="s4">'intb'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^During handling of the above exception, another '</span>
             <span class="s4">r'exception occurred:\n\n'</span><span class="s3">, </span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Traceback</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^The above exception was the direct cause of the '</span>
             <span class="s4">r'following exception:\n\n'</span><span class="s3">, </span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Traceback</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^(?=  File &quot;[^&quot;]+&quot;, line \d+)'</span><span class="s3">, </span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Traceback</span><span class="s3">, </span><span class="s4">'intb'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^.*\n'</span><span class="s3">, </span><span class="s1">Other</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'intb'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'^(  File )(&quot;[^&quot;]+&quot;)(, line )(\d+)(, in )(.+)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'^(  File )(&quot;[^&quot;]+&quot;)(, line )(\d+)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'^(    )(.+)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Whitespace</span><span class="s3">, </span><span class="s1">using</span><span class="s3">(</span><span class="s1">PythonLexer</span><span class="s3">), </span><span class="s1">Whitespace</span><span class="s3">), </span><span class="s4">'markers'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^([ \t]*)(\.\.\.)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Whitespace</span><span class="s3">, </span><span class="s1">Comment</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">)),  </span><span class="s5"># for doctests...</span>
            <span class="s3">(</span><span class="s4">r'^([^:]+)(: )(.+)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Error</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">), </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^([a-zA-Z_][\w.]*)(:?\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Error</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">), </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'markers'</span><span class="s3">: [</span>
            <span class="s5"># Either `PEP 657 &lt;https://www.python.org/dev/peps/pep-0657/&gt;`</span>
            <span class="s5"># error locations in Python 3.11+, or single-caret markers</span>
            <span class="s5"># for syntax errors before that.</span>
            <span class="s3">(</span><span class="s4">r'^( {4,})([~^]+)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Whitespace</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">.</span><span class="s1">Marker</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">),</span>
             <span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">),</span>
        <span class="s3">],</span>
    <span class="s3">}</span>


<span class="s1">Python3TracebackLexer </span><span class="s3">= </span><span class="s1">PythonTracebackLexer</span>


<span class="s2">class </span><span class="s1">Python2TracebackLexer</span><span class="s3">(</span><span class="s1">RegexLexer</span><span class="s3">):</span>
    <span class="s0">&quot;&quot;&quot; 
    For Python tracebacks. 
 
    .. versionadded:: 0.7 
 
    .. versionchanged:: 2.5 
       This class has been renamed from ``PythonTracebackLexer``. 
       ``PythonTracebackLexer`` now refers to the Python 3 variant. 
    &quot;&quot;&quot;</span>

    <span class="s1">name </span><span class="s3">= </span><span class="s4">'Python 2.x Traceback'</span>
    <span class="s1">aliases </span><span class="s3">= [</span><span class="s4">'py2tb'</span><span class="s3">]</span>
    <span class="s1">filenames </span><span class="s3">= [</span><span class="s4">'*.py2tb'</span><span class="s3">]</span>
    <span class="s1">mimetypes </span><span class="s3">= [</span><span class="s4">'text/x-python2-traceback'</span><span class="s3">]</span>

    <span class="s1">tokens </span><span class="s3">= {</span>
        <span class="s4">'root'</span><span class="s3">: [</span>
            <span class="s5"># Cover both (most recent call last) and (innermost last)</span>
            <span class="s5"># The optional ^C allows us to catch keyboard interrupt signals.</span>
            <span class="s3">(</span><span class="s4">r'^(\^C)?(Traceback.*\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Traceback</span><span class="s3">), </span><span class="s4">'intb'</span><span class="s3">),</span>
            <span class="s5"># SyntaxError starts with this.</span>
            <span class="s3">(</span><span class="s4">r'^(?=  File &quot;[^&quot;]+&quot;, line \d+)'</span><span class="s3">, </span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Traceback</span><span class="s3">, </span><span class="s4">'intb'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^.*\n'</span><span class="s3">, </span><span class="s1">Other</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'intb'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'^(  File )(&quot;[^&quot;]+&quot;)(, line )(\d+)(, in )(.+)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'^(  File )(&quot;[^&quot;]+&quot;)(, line )(\d+)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'^(    )(.+)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">using</span><span class="s3">(</span><span class="s1">Python2Lexer</span><span class="s3">), </span><span class="s1">Whitespace</span><span class="s3">), </span><span class="s4">'marker'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^([ \t]*)(\.\.\.)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Comment</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">)),  </span><span class="s5"># for doctests...</span>
            <span class="s3">(</span><span class="s4">r'^([^:]+)(: )(.+)(\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Error</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">), </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^([a-zA-Z_]\w*)(:?\n)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Generic</span><span class="s3">.</span><span class="s1">Error</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">), </span><span class="s4">'#pop'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'marker'</span><span class="s3">: [</span>
            <span class="s5"># For syntax errors.</span>
            <span class="s3">(</span><span class="s4">r'( {4,})(\^)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">.</span><span class="s1">Marker</span><span class="s3">), </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">),</span>
        <span class="s3">],</span>
    <span class="s3">}</span>


<span class="s2">class </span><span class="s1">CythonLexer</span><span class="s3">(</span><span class="s1">RegexLexer</span><span class="s3">):</span>
    <span class="s0">&quot;&quot;&quot; 
    For Pyrex and Cython source code. 
 
    .. versionadded:: 1.1 
    &quot;&quot;&quot;</span>

    <span class="s1">name </span><span class="s3">= </span><span class="s4">'Cython'</span>
    <span class="s1">url </span><span class="s3">= </span><span class="s4">'http://cython.org'</span>
    <span class="s1">aliases </span><span class="s3">= [</span><span class="s4">'cython'</span><span class="s3">, </span><span class="s4">'pyx'</span><span class="s3">, </span><span class="s4">'pyrex'</span><span class="s3">]</span>
    <span class="s1">filenames </span><span class="s3">= [</span><span class="s4">'*.pyx'</span><span class="s3">, </span><span class="s4">'*.pxd'</span><span class="s3">, </span><span class="s4">'*.pxi'</span><span class="s3">]</span>
    <span class="s1">mimetypes </span><span class="s3">= [</span><span class="s4">'text/x-cython'</span><span class="s3">, </span><span class="s4">'application/x-cython'</span><span class="s3">]</span>

    <span class="s1">tokens </span><span class="s3">= {</span>
        <span class="s4">'root'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'^(\s*)(&quot;&quot;&quot;(?:.|\n)*?&quot;&quot;&quot;)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Whitespace</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Doc</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r&quot;^(\s*)('''(?:.|\n)*?''')&quot;</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Whitespace</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Doc</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'[^\S\n]+'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'#.*$'</span><span class="s3">, </span><span class="s1">Comment</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[]{}:(),;[]'</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\\\n'</span><span class="s3">, </span><span class="s1">Whitespace</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\\'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(in|is|and|or|not)\b'</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">.</span><span class="s1">Word</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(&lt;)([a-zA-Z0-9.?]+)(&gt;)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Punctuation</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Type</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'!=|==|&lt;&lt;|&gt;&gt;|[-~+/*%=&lt;&gt;&amp;^|.?]'</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(from)(\d+)(&lt;=)(\s+)(&lt;)(\d+)(:)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Integer</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">,</span>
                      <span class="s1">Name</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">)),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'keywords'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(def|property)(\s+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">), </span><span class="s4">'funcname'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(cp?def)(\s+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">), </span><span class="s4">'cdef'</span><span class="s3">),</span>
            <span class="s5"># (should actually start a block with only cdefs)</span>
            <span class="s3">(</span><span class="s4">r'(cdef)(:)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'(class|struct)(\s+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">), </span><span class="s4">'classname'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(from)(\s+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">), </span><span class="s4">'fromimport'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(c?import)(\s+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">), </span><span class="s4">'import'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'builtins'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'backtick'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">'(?:[rR]|[uU][rR]|[rR][uU])&quot;&quot;&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'tdqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">&quot;(?:[rR]|[uU][rR]|[rR][uU])'''&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'tsqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">'(?:[rR]|[uU][rR]|[rR][uU])&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'dqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">&quot;(?:[rR]|[uU][rR]|[rR][uU])'&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'sqs'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">'[uU]?&quot;&quot;&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'tdqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;[uU]?'''&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'tsqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">'[uU]?&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'dqs'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">&quot;[uU]?'&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'sqs'</span><span class="s3">)),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'name'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'numbers'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'keywords'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'assert'</span><span class="s3">, </span><span class="s4">'async'</span><span class="s3">, </span><span class="s4">'await'</span><span class="s3">, </span><span class="s4">'break'</span><span class="s3">, </span><span class="s4">'by'</span><span class="s3">, </span><span class="s4">'continue'</span><span class="s3">, </span><span class="s4">'ctypedef'</span><span class="s3">, </span><span class="s4">'del'</span><span class="s3">, </span><span class="s4">'elif'</span><span class="s3">,</span>
                <span class="s4">'else'</span><span class="s3">, </span><span class="s4">'except'</span><span class="s3">, </span><span class="s4">'except?'</span><span class="s3">, </span><span class="s4">'exec'</span><span class="s3">, </span><span class="s4">'finally'</span><span class="s3">, </span><span class="s4">'for'</span><span class="s3">, </span><span class="s4">'fused'</span><span class="s3">, </span><span class="s4">'gil'</span><span class="s3">,</span>
                <span class="s4">'global'</span><span class="s3">, </span><span class="s4">'if'</span><span class="s3">, </span><span class="s4">'include'</span><span class="s3">, </span><span class="s4">'lambda'</span><span class="s3">, </span><span class="s4">'nogil'</span><span class="s3">, </span><span class="s4">'pass'</span><span class="s3">, </span><span class="s4">'print'</span><span class="s3">,</span>
                <span class="s4">'raise'</span><span class="s3">, </span><span class="s4">'return'</span><span class="s3">, </span><span class="s4">'try'</span><span class="s3">, </span><span class="s4">'while'</span><span class="s3">, </span><span class="s4">'yield'</span><span class="s3">, </span><span class="s4">'as'</span><span class="s3">, </span><span class="s4">'with'</span><span class="s3">), </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Keyword</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(DEF|IF|ELIF|ELSE)\b'</span><span class="s3">, </span><span class="s1">Comment</span><span class="s3">.</span><span class="s1">Preproc</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'builtins'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'__import__'</span><span class="s3">, </span><span class="s4">'abs'</span><span class="s3">, </span><span class="s4">'all'</span><span class="s3">, </span><span class="s4">'any'</span><span class="s3">, </span><span class="s4">'apply'</span><span class="s3">, </span><span class="s4">'basestring'</span><span class="s3">, </span><span class="s4">'bin'</span><span class="s3">, </span><span class="s4">'bint'</span><span class="s3">,</span>
                <span class="s4">'bool'</span><span class="s3">, </span><span class="s4">'buffer'</span><span class="s3">, </span><span class="s4">'bytearray'</span><span class="s3">, </span><span class="s4">'bytes'</span><span class="s3">, </span><span class="s4">'callable'</span><span class="s3">, </span><span class="s4">'chr'</span><span class="s3">,</span>
                <span class="s4">'classmethod'</span><span class="s3">, </span><span class="s4">'cmp'</span><span class="s3">, </span><span class="s4">'coerce'</span><span class="s3">, </span><span class="s4">'compile'</span><span class="s3">, </span><span class="s4">'complex'</span><span class="s3">, </span><span class="s4">'delattr'</span><span class="s3">,</span>
                <span class="s4">'dict'</span><span class="s3">, </span><span class="s4">'dir'</span><span class="s3">, </span><span class="s4">'divmod'</span><span class="s3">, </span><span class="s4">'enumerate'</span><span class="s3">, </span><span class="s4">'eval'</span><span class="s3">, </span><span class="s4">'execfile'</span><span class="s3">, </span><span class="s4">'exit'</span><span class="s3">,</span>
                <span class="s4">'file'</span><span class="s3">, </span><span class="s4">'filter'</span><span class="s3">, </span><span class="s4">'float'</span><span class="s3">, </span><span class="s4">'frozenset'</span><span class="s3">, </span><span class="s4">'getattr'</span><span class="s3">, </span><span class="s4">'globals'</span><span class="s3">,</span>
                <span class="s4">'hasattr'</span><span class="s3">, </span><span class="s4">'hash'</span><span class="s3">, </span><span class="s4">'hex'</span><span class="s3">, </span><span class="s4">'id'</span><span class="s3">, </span><span class="s4">'input'</span><span class="s3">, </span><span class="s4">'int'</span><span class="s3">, </span><span class="s4">'intern'</span><span class="s3">, </span><span class="s4">'isinstance'</span><span class="s3">,</span>
                <span class="s4">'issubclass'</span><span class="s3">, </span><span class="s4">'iter'</span><span class="s3">, </span><span class="s4">'len'</span><span class="s3">, </span><span class="s4">'list'</span><span class="s3">, </span><span class="s4">'locals'</span><span class="s3">, </span><span class="s4">'long'</span><span class="s3">, </span><span class="s4">'map'</span><span class="s3">, </span><span class="s4">'max'</span><span class="s3">,</span>
                <span class="s4">'min'</span><span class="s3">, </span><span class="s4">'next'</span><span class="s3">, </span><span class="s4">'object'</span><span class="s3">, </span><span class="s4">'oct'</span><span class="s3">, </span><span class="s4">'open'</span><span class="s3">, </span><span class="s4">'ord'</span><span class="s3">, </span><span class="s4">'pow'</span><span class="s3">, </span><span class="s4">'property'</span><span class="s3">, </span><span class="s4">'Py_ssize_t'</span><span class="s3">,</span>
                <span class="s4">'range'</span><span class="s3">, </span><span class="s4">'raw_input'</span><span class="s3">, </span><span class="s4">'reduce'</span><span class="s3">, </span><span class="s4">'reload'</span><span class="s3">, </span><span class="s4">'repr'</span><span class="s3">, </span><span class="s4">'reversed'</span><span class="s3">,</span>
                <span class="s4">'round'</span><span class="s3">, </span><span class="s4">'set'</span><span class="s3">, </span><span class="s4">'setattr'</span><span class="s3">, </span><span class="s4">'slice'</span><span class="s3">, </span><span class="s4">'sorted'</span><span class="s3">, </span><span class="s4">'staticmethod'</span><span class="s3">,</span>
                <span class="s4">'str'</span><span class="s3">, </span><span class="s4">'sum'</span><span class="s3">, </span><span class="s4">'super'</span><span class="s3">, </span><span class="s4">'tuple'</span><span class="s3">, </span><span class="s4">'type'</span><span class="s3">, </span><span class="s4">'unichr'</span><span class="s3">, </span><span class="s4">'unicode'</span><span class="s3">, </span><span class="s4">'unsigned'</span><span class="s3">,</span>
                <span class="s4">'vars'</span><span class="s3">, </span><span class="s4">'xrange'</span><span class="s3">, </span><span class="s4">'zip'</span><span class="s3">), </span><span class="s1">prefix</span><span class="s3">=</span><span class="s4">r'(?&lt;!\.)'</span><span class="s3">, </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(?&lt;!\.)(self|None|Ellipsis|NotImplemented|False|True|NULL'</span>
             <span class="s4">r')\b'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">.</span><span class="s1">Pseudo</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'ArithmeticError'</span><span class="s3">, </span><span class="s4">'AssertionError'</span><span class="s3">, </span><span class="s4">'AttributeError'</span><span class="s3">,</span>
                <span class="s4">'BaseException'</span><span class="s3">, </span><span class="s4">'DeprecationWarning'</span><span class="s3">, </span><span class="s4">'EOFError'</span><span class="s3">, </span><span class="s4">'EnvironmentError'</span><span class="s3">,</span>
                <span class="s4">'Exception'</span><span class="s3">, </span><span class="s4">'FloatingPointError'</span><span class="s3">, </span><span class="s4">'FutureWarning'</span><span class="s3">, </span><span class="s4">'GeneratorExit'</span><span class="s3">,</span>
                <span class="s4">'IOError'</span><span class="s3">, </span><span class="s4">'ImportError'</span><span class="s3">, </span><span class="s4">'ImportWarning'</span><span class="s3">, </span><span class="s4">'IndentationError'</span><span class="s3">,</span>
                <span class="s4">'IndexError'</span><span class="s3">, </span><span class="s4">'KeyError'</span><span class="s3">, </span><span class="s4">'KeyboardInterrupt'</span><span class="s3">, </span><span class="s4">'LookupError'</span><span class="s3">,</span>
                <span class="s4">'MemoryError'</span><span class="s3">, </span><span class="s4">'NameError'</span><span class="s3">, </span><span class="s4">'NotImplemented'</span><span class="s3">, </span><span class="s4">'NotImplementedError'</span><span class="s3">,</span>
                <span class="s4">'OSError'</span><span class="s3">, </span><span class="s4">'OverflowError'</span><span class="s3">, </span><span class="s4">'OverflowWarning'</span><span class="s3">,</span>
                <span class="s4">'PendingDeprecationWarning'</span><span class="s3">, </span><span class="s4">'ReferenceError'</span><span class="s3">, </span><span class="s4">'RuntimeError'</span><span class="s3">,</span>
                <span class="s4">'RuntimeWarning'</span><span class="s3">, </span><span class="s4">'StandardError'</span><span class="s3">, </span><span class="s4">'StopIteration'</span><span class="s3">, </span><span class="s4">'SyntaxError'</span><span class="s3">,</span>
                <span class="s4">'SyntaxWarning'</span><span class="s3">, </span><span class="s4">'SystemError'</span><span class="s3">, </span><span class="s4">'SystemExit'</span><span class="s3">, </span><span class="s4">'TabError'</span><span class="s3">,</span>
                <span class="s4">'TypeError'</span><span class="s3">, </span><span class="s4">'UnboundLocalError'</span><span class="s3">, </span><span class="s4">'UnicodeDecodeError'</span><span class="s3">,</span>
                <span class="s4">'UnicodeEncodeError'</span><span class="s3">, </span><span class="s4">'UnicodeError'</span><span class="s3">, </span><span class="s4">'UnicodeTranslateError'</span><span class="s3">,</span>
                <span class="s4">'UnicodeWarning'</span><span class="s3">, </span><span class="s4">'UserWarning'</span><span class="s3">, </span><span class="s4">'ValueError'</span><span class="s3">, </span><span class="s4">'Warning'</span><span class="s3">,</span>
                <span class="s4">'ZeroDivisionError'</span><span class="s3">), </span><span class="s1">prefix</span><span class="s3">=</span><span class="s4">r'(?&lt;!\.)'</span><span class="s3">, </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'\b'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Exception</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'numbers'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(\d+\.?\d*|\d*\.\d+)([eE][+-]?[0-9]+)?'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Float</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'0\d+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Oct</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'0[xX][a-fA-F0-9]+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Hex</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\d+L'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Integer</span><span class="s3">.</span><span class="s1">Long</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\d+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Integer</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'backtick'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">'`.*?`'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Backtick</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'name'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'@\w+'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Decorator</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_]\w*'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'funcname'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_]\w*'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Function</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'cdef'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(public|readonly|extern|api|inline)\b'</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Reserved</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(struct|enum|union|class)\b'</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'([a-zA-Z_]\w*)(\s*)(?=[(:#=]|$)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Function</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">), </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'([a-zA-Z_]\w*)(\s*)(,)'</span><span class="s3">,</span>
             <span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Function</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'from\b'</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'as\b'</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r':'</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(?=[&quot;\'])'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_]\w*'</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Type</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'.'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'classname'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_]\w*'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Class</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'import'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(\s+)(as)(\s+)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_][\w.]*'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(\s*)(,)(\s*)'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">)),</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">)  </span><span class="s5"># all else: go back</span>
        <span class="s3">],</span>
        <span class="s4">'fromimport'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'(\s+)(c?import)\b'</span><span class="s3">, </span><span class="s1">bygroups</span><span class="s3">(</span><span class="s1">Text</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">), </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[a-zA-Z_.][\w.]*'</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Namespace</span><span class="s3">),</span>
            <span class="s5"># ``cdef foo from &quot;header&quot;``, or ``for foo from 0 &lt; i &lt; 10``</span>
            <span class="s1">default</span><span class="s3">(</span><span class="s4">'#pop'</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'stringescape'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\\([\\abfnrtv&quot;\']|\n|N\{.*?\}|u[a-fA-F0-9]{4}|'</span>
             <span class="s4">r'U[a-fA-F0-9]{8}|x[a-fA-F0-9]{2}|[0-7]{1,3})'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'strings'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'%(\([a-zA-Z0-9]+\))?[-#0 +]*([0-9]+|[*])?(\.([0-9]+|[*]))?'</span>
             <span class="s4">'[hlL]?[E-GXc-giorsux%]'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Interpol</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[^\\\'&quot;%\n]+'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">),</span>
            <span class="s5"># quotes, percents and backslashes must be parsed one at a time</span>
            <span class="s3">(</span><span class="s4">r'[\'&quot;\\]'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">),</span>
            <span class="s5"># unhandled string formatting sign</span>
            <span class="s3">(</span><span class="s4">r'%'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">)</span>
            <span class="s5"># newlines are an error (use &quot;nl&quot; state)</span>
        <span class="s3">],</span>
        <span class="s4">'nl'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'dqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\\\\|\\&quot;|\\\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),  </span><span class="s5"># included here again for raw strings</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'sqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r&quot;'&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r&quot;\\\\|\\'|\\\n&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">),  </span><span class="s5"># included here again for raw strings</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'tdqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'&quot;&quot;&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'nl'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'tsqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r&quot;'''&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'strings'</span><span class="s3">),</span>
            <span class="s1">include</span><span class="s3">(</span><span class="s4">'nl'</span><span class="s3">)</span>
        <span class="s3">],</span>
    <span class="s3">}</span>


<span class="s2">class </span><span class="s1">DgLexer</span><span class="s3">(</span><span class="s1">RegexLexer</span><span class="s3">):</span>
    <span class="s0">&quot;&quot;&quot; 
    Lexer for dg, 
    a functional and object-oriented programming language 
    running on the CPython 3 VM. 
 
    .. versionadded:: 1.6 
    &quot;&quot;&quot;</span>
    <span class="s1">name </span><span class="s3">= </span><span class="s4">'dg'</span>
    <span class="s1">aliases </span><span class="s3">= [</span><span class="s4">'dg'</span><span class="s3">]</span>
    <span class="s1">filenames </span><span class="s3">= [</span><span class="s4">'*.dg'</span><span class="s3">]</span>
    <span class="s1">mimetypes </span><span class="s3">= [</span><span class="s4">'text/x-dg'</span><span class="s3">]</span>

    <span class="s1">tokens </span><span class="s3">= {</span>
        <span class="s4">'root'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\s+'</span><span class="s3">, </span><span class="s1">Text</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'#.*?$'</span><span class="s3">, </span><span class="s1">Comment</span><span class="s3">.</span><span class="s1">Single</span><span class="s3">),</span>

            <span class="s3">(</span><span class="s4">r'(?i)0b[01]+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Bin</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(?i)0o[0-7]+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Oct</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(?i)0x[0-9a-f]+'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Hex</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(?i)[+-]?[0-9]+\.[0-9]+(e[+-]?[0-9]+)?j?'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Float</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(?i)[+-]?[0-9]+e[+-]?\d+j?'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Float</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'(?i)[+-]?[0-9]+j?'</span><span class="s3">, </span><span class="s1">Number</span><span class="s3">.</span><span class="s1">Integer</span><span class="s3">),</span>

            <span class="s3">(</span><span class="s4">r&quot;(?i)(br|r?b?)'''&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'tsqs'</span><span class="s3">, </span><span class="s4">'string'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'(?i)(br|r?b?)&quot;&quot;&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'tdqs'</span><span class="s3">, </span><span class="s4">'string'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r&quot;(?i)(br|r?b?)'&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'sqs'</span><span class="s3">, </span><span class="s4">'string'</span><span class="s3">)),</span>
            <span class="s3">(</span><span class="s4">r'(?i)(br|r?b?)&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s1">combined</span><span class="s3">(</span><span class="s4">'stringescape'</span><span class="s3">, </span><span class="s4">'dqs'</span><span class="s3">, </span><span class="s4">'string'</span><span class="s3">)),</span>

            <span class="s3">(</span><span class="s4">r&quot;`\w+'*`&quot;</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\b(and|in|is|or|where)\b'</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">.</span><span class="s1">Word</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[!$%&amp;*+\-./:&lt;-@\\^|~;,]+'</span><span class="s3">, </span><span class="s1">Operator</span><span class="s3">),</span>

            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'bool'</span><span class="s3">, </span><span class="s4">'bytearray'</span><span class="s3">, </span><span class="s4">'bytes'</span><span class="s3">, </span><span class="s4">'classmethod'</span><span class="s3">, </span><span class="s4">'complex'</span><span class="s3">, </span><span class="s4">'dict'</span><span class="s3">, </span><span class="s4">'dict</span><span class="s2">\'</span><span class="s4">'</span><span class="s3">,</span>
                <span class="s4">'float'</span><span class="s3">, </span><span class="s4">'frozenset'</span><span class="s3">, </span><span class="s4">'int'</span><span class="s3">, </span><span class="s4">'list'</span><span class="s3">, </span><span class="s4">'list</span><span class="s2">\'</span><span class="s4">'</span><span class="s3">, </span><span class="s4">'memoryview'</span><span class="s3">, </span><span class="s4">'object'</span><span class="s3">,</span>
                <span class="s4">'property'</span><span class="s3">, </span><span class="s4">'range'</span><span class="s3">, </span><span class="s4">'set'</span><span class="s3">, </span><span class="s4">'set</span><span class="s2">\'</span><span class="s4">'</span><span class="s3">, </span><span class="s4">'slice'</span><span class="s3">, </span><span class="s4">'staticmethod'</span><span class="s3">, </span><span class="s4">'str'</span><span class="s3">,</span>
                <span class="s4">'super'</span><span class="s3">, </span><span class="s4">'tuple'</span><span class="s3">, </span><span class="s4">'tuple</span><span class="s2">\'</span><span class="s4">'</span><span class="s3">, </span><span class="s4">'type'</span><span class="s3">),</span>
                   <span class="s1">prefix</span><span class="s3">=</span><span class="s4">r'(?&lt;!\.)'</span><span class="s3">, </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'(?![\'\w])'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s1">words</span><span class="s3">((</span>
                <span class="s4">'__import__'</span><span class="s3">, </span><span class="s4">'abs'</span><span class="s3">, </span><span class="s4">'all'</span><span class="s3">, </span><span class="s4">'any'</span><span class="s3">, </span><span class="s4">'bin'</span><span class="s3">, </span><span class="s4">'bind'</span><span class="s3">, </span><span class="s4">'chr'</span><span class="s3">, </span><span class="s4">'cmp'</span><span class="s3">, </span><span class="s4">'compile'</span><span class="s3">,</span>
                <span class="s4">'complex'</span><span class="s3">, </span><span class="s4">'delattr'</span><span class="s3">, </span><span class="s4">'dir'</span><span class="s3">, </span><span class="s4">'divmod'</span><span class="s3">, </span><span class="s4">'drop'</span><span class="s3">, </span><span class="s4">'dropwhile'</span><span class="s3">, </span><span class="s4">'enumerate'</span><span class="s3">,</span>
                <span class="s4">'eval'</span><span class="s3">, </span><span class="s4">'exhaust'</span><span class="s3">, </span><span class="s4">'filter'</span><span class="s3">, </span><span class="s4">'flip'</span><span class="s3">, </span><span class="s4">'foldl1?'</span><span class="s3">, </span><span class="s4">'format'</span><span class="s3">, </span><span class="s4">'fst'</span><span class="s3">,</span>
                <span class="s4">'getattr'</span><span class="s3">, </span><span class="s4">'globals'</span><span class="s3">, </span><span class="s4">'hasattr'</span><span class="s3">, </span><span class="s4">'hash'</span><span class="s3">, </span><span class="s4">'head'</span><span class="s3">, </span><span class="s4">'hex'</span><span class="s3">, </span><span class="s4">'id'</span><span class="s3">, </span><span class="s4">'init'</span><span class="s3">,</span>
                <span class="s4">'input'</span><span class="s3">, </span><span class="s4">'isinstance'</span><span class="s3">, </span><span class="s4">'issubclass'</span><span class="s3">, </span><span class="s4">'iter'</span><span class="s3">, </span><span class="s4">'iterate'</span><span class="s3">, </span><span class="s4">'last'</span><span class="s3">, </span><span class="s4">'len'</span><span class="s3">,</span>
                <span class="s4">'locals'</span><span class="s3">, </span><span class="s4">'map'</span><span class="s3">, </span><span class="s4">'max'</span><span class="s3">, </span><span class="s4">'min'</span><span class="s3">, </span><span class="s4">'next'</span><span class="s3">, </span><span class="s4">'oct'</span><span class="s3">, </span><span class="s4">'open'</span><span class="s3">, </span><span class="s4">'ord'</span><span class="s3">, </span><span class="s4">'pow'</span><span class="s3">,</span>
                <span class="s4">'print'</span><span class="s3">, </span><span class="s4">'repr'</span><span class="s3">, </span><span class="s4">'reversed'</span><span class="s3">, </span><span class="s4">'round'</span><span class="s3">, </span><span class="s4">'setattr'</span><span class="s3">, </span><span class="s4">'scanl1?'</span><span class="s3">, </span><span class="s4">'snd'</span><span class="s3">,</span>
                <span class="s4">'sorted'</span><span class="s3">, </span><span class="s4">'sum'</span><span class="s3">, </span><span class="s4">'tail'</span><span class="s3">, </span><span class="s4">'take'</span><span class="s3">, </span><span class="s4">'takewhile'</span><span class="s3">, </span><span class="s4">'vars'</span><span class="s3">, </span><span class="s4">'zip'</span><span class="s3">),</span>
                   <span class="s1">prefix</span><span class="s3">=</span><span class="s4">r'(?&lt;!\.)'</span><span class="s3">, </span><span class="s1">suffix</span><span class="s3">=</span><span class="s4">r'(?![\'\w])'</span><span class="s3">),</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r&quot;(?&lt;!\.)(self|Ellipsis|NotImplemented|None|True|False)(?!['\w])&quot;</span><span class="s3">,</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Builtin</span><span class="s3">.</span><span class="s1">Pseudo</span><span class="s3">),</span>

            <span class="s3">(</span><span class="s4">r&quot;(?&lt;!\.)[A-Z]\w*(Error|Exception|Warning)'*(?!['\w])&quot;</span><span class="s3">,</span>
             <span class="s1">Name</span><span class="s3">.</span><span class="s1">Exception</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r&quot;(?&lt;!\.)(Exception|GeneratorExit|KeyboardInterrupt|StopIteration|&quot;</span>
             <span class="s4">r&quot;SystemExit)(?!['\w])&quot;</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">.</span><span class="s1">Exception</span><span class="s3">),</span>

            <span class="s3">(</span><span class="s4">r&quot;(?&lt;![\w.])(except|finally|for|if|import|not|otherwise|raise|&quot;</span>
             <span class="s4">r&quot;subclass|while|with|yield)(?!['\w])&quot;</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Reserved</span><span class="s3">),</span>

            <span class="s3">(</span><span class="s4">r&quot;[A-Z_]+'*(?!['\w])&quot;</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r&quot;[A-Z]\w+'*(?!['\w])&quot;</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Type</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r&quot;\w+'*&quot;</span><span class="s3">, </span><span class="s1">Name</span><span class="s3">),</span>

            <span class="s3">(</span><span class="s4">r'[()]'</span><span class="s3">, </span><span class="s1">Punctuation</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'.'</span><span class="s3">, </span><span class="s1">Error</span><span class="s3">),</span>
        <span class="s3">],</span>
        <span class="s4">'stringescape'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'\\([\\abfnrtv&quot;\']|\n|N\{.*?\}|u[a-fA-F0-9]{4}|'</span>
             <span class="s4">r'U[a-fA-F0-9]{8}|x[a-fA-F0-9]{2}|[0-7]{1,3})'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Escape</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'string'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'%(\(\w+\))?[-#0 +]*([0-9]+|[*])?(\.([0-9]+|[*]))?'</span>
             <span class="s4">'[hlL]?[E-GXc-giorsux%]'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">.</span><span class="s1">Interpol</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'[^\\\'&quot;%\n]+'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">),</span>
            <span class="s5"># quotes, percents and backslashes must be parsed one at a time</span>
            <span class="s3">(</span><span class="s4">r'[\'&quot;\\]'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">),</span>
            <span class="s5"># unhandled string formatting sign</span>
            <span class="s3">(</span><span class="s4">r'%'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">),</span>
            <span class="s3">(</span><span class="s4">r'\n'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'dqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'sqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r&quot;'&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'tdqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r'&quot;&quot;&quot;'</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">)</span>
        <span class="s3">],</span>
        <span class="s4">'tsqs'</span><span class="s3">: [</span>
            <span class="s3">(</span><span class="s4">r&quot;'''&quot;</span><span class="s3">, </span><span class="s1">String</span><span class="s3">, </span><span class="s4">'#pop'</span><span class="s3">)</span>
        <span class="s3">],</span>
    <span class="s3">}</span>


<span class="s2">class </span><span class="s1">NumPyLexer</span><span class="s3">(</span><span class="s1">PythonLexer</span><span class="s3">):</span>
    <span class="s0">&quot;&quot;&quot; 
    A Python lexer recognizing Numerical Python builtins. 
 
    .. versionadded:: 0.10 
    &quot;&quot;&quot;</span>

    <span class="s1">name </span><span class="s3">= </span><span class="s4">'NumPy'</span>
    <span class="s1">url </span><span class="s3">= </span><span class="s4">'https://numpy.org/'</span>
    <span class="s1">aliases </span><span class="s3">= [</span><span class="s4">'numpy'</span><span class="s3">]</span>

    <span class="s5"># override the mimetypes to not inherit them from python</span>
    <span class="s1">mimetypes </span><span class="s3">= []</span>
    <span class="s1">filenames </span><span class="s3">= []</span>

    <span class="s1">EXTRA_KEYWORDS </span><span class="s3">= {</span>
        <span class="s4">'abs'</span><span class="s3">, </span><span class="s4">'absolute'</span><span class="s3">, </span><span class="s4">'accumulate'</span><span class="s3">, </span><span class="s4">'add'</span><span class="s3">, </span><span class="s4">'alen'</span><span class="s3">, </span><span class="s4">'all'</span><span class="s3">, </span><span class="s4">'allclose'</span><span class="s3">,</span>
        <span class="s4">'alltrue'</span><span class="s3">, </span><span class="s4">'alterdot'</span><span class="s3">, </span><span class="s4">'amax'</span><span class="s3">, </span><span class="s4">'amin'</span><span class="s3">, </span><span class="s4">'angle'</span><span class="s3">, </span><span class="s4">'any'</span><span class="s3">, </span><span class="s4">'append'</span><span class="s3">,</span>
        <span class="s4">'apply_along_axis'</span><span class="s3">, </span><span class="s4">'apply_over_axes'</span><span class="s3">, </span><span class="s4">'arange'</span><span class="s3">, </span><span class="s4">'arccos'</span><span class="s3">, </span><span class="s4">'arccosh'</span><span class="s3">,</span>
        <span class="s4">'arcsin'</span><span class="s3">, </span><span class="s4">'arcsinh'</span><span class="s3">, </span><span class="s4">'arctan'</span><span class="s3">, </span><span class="s4">'arctan2'</span><span class="s3">, </span><span class="s4">'arctanh'</span><span class="s3">, </span><span class="s4">'argmax'</span><span class="s3">, </span><span class="s4">'argmin'</span><span class="s3">,</span>
        <span class="s4">'argsort'</span><span class="s3">, </span><span class="s4">'argwhere'</span><span class="s3">, </span><span class="s4">'around'</span><span class="s3">, </span><span class="s4">'array'</span><span class="s3">, </span><span class="s4">'array2string'</span><span class="s3">, </span><span class="s4">'array_equal'</span><span class="s3">,</span>
        <span class="s4">'array_equiv'</span><span class="s3">, </span><span class="s4">'array_repr'</span><span class="s3">, </span><span class="s4">'array_split'</span><span class="s3">, </span><span class="s4">'array_str'</span><span class="s3">, </span><span class="s4">'arrayrange'</span><span class="s3">,</span>
        <span class="s4">'asanyarray'</span><span class="s3">, </span><span class="s4">'asarray'</span><span class="s3">, </span><span class="s4">'asarray_chkfinite'</span><span class="s3">, </span><span class="s4">'ascontiguousarray'</span><span class="s3">,</span>
        <span class="s4">'asfarray'</span><span class="s3">, </span><span class="s4">'asfortranarray'</span><span class="s3">, </span><span class="s4">'asmatrix'</span><span class="s3">, </span><span class="s4">'asscalar'</span><span class="s3">, </span><span class="s4">'astype'</span><span class="s3">,</span>
        <span class="s4">'atleast_1d'</span><span class="s3">, </span><span class="s4">'atleast_2d'</span><span class="s3">, </span><span class="s4">'atleast_3d'</span><span class="s3">, </span><span class="s4">'average'</span><span class="s3">, </span><span class="s4">'bartlett'</span><span class="s3">,</span>
        <span class="s4">'base_repr'</span><span class="s3">, </span><span class="s4">'beta'</span><span class="s3">, </span><span class="s4">'binary_repr'</span><span class="s3">, </span><span class="s4">'bincount'</span><span class="s3">, </span><span class="s4">'binomial'</span><span class="s3">,</span>
        <span class="s4">'bitwise_and'</span><span class="s3">, </span><span class="s4">'bitwise_not'</span><span class="s3">, </span><span class="s4">'bitwise_or'</span><span class="s3">, </span><span class="s4">'bitwise_xor'</span><span class="s3">, </span><span class="s4">'blackman'</span><span class="s3">,</span>
        <span class="s4">'bmat'</span><span class="s3">, </span><span class="s4">'broadcast'</span><span class="s3">, </span><span class="s4">'byte_bounds'</span><span class="s3">, </span><span class="s4">'bytes'</span><span class="s3">, </span><span class="s4">'byteswap'</span><span class="s3">, </span><span class="s4">'c_'</span><span class="s3">,</span>
        <span class="s4">'can_cast'</span><span class="s3">, </span><span class="s4">'ceil'</span><span class="s3">, </span><span class="s4">'choose'</span><span class="s3">, </span><span class="s4">'clip'</span><span class="s3">, </span><span class="s4">'column_stack'</span><span class="s3">, </span><span class="s4">'common_type'</span><span class="s3">,</span>
        <span class="s4">'compare_chararrays'</span><span class="s3">, </span><span class="s4">'compress'</span><span class="s3">, </span><span class="s4">'concatenate'</span><span class="s3">, </span><span class="s4">'conj'</span><span class="s3">, </span><span class="s4">'conjugate'</span><span class="s3">,</span>
        <span class="s4">'convolve'</span><span class="s3">, </span><span class="s4">'copy'</span><span class="s3">, </span><span class="s4">'corrcoef'</span><span class="s3">, </span><span class="s4">'correlate'</span><span class="s3">, </span><span class="s4">'cos'</span><span class="s3">, </span><span class="s4">'cosh'</span><span class="s3">, </span><span class="s4">'cov'</span><span class="s3">,</span>
        <span class="s4">'cross'</span><span class="s3">, </span><span class="s4">'cumprod'</span><span class="s3">, </span><span class="s4">'cumproduct'</span><span class="s3">, </span><span class="s4">'cumsum'</span><span class="s3">, </span><span class="s4">'delete'</span><span class="s3">, </span><span class="s4">'deprecate'</span><span class="s3">,</span>
        <span class="s4">'diag'</span><span class="s3">, </span><span class="s4">'diagflat'</span><span class="s3">, </span><span class="s4">'diagonal'</span><span class="s3">, </span><span class="s4">'diff'</span><span class="s3">, </span><span class="s4">'digitize'</span><span class="s3">, </span><span class="s4">'disp'</span><span class="s3">, </span><span class="s4">'divide'</span><span class="s3">,</span>
        <span class="s4">'dot'</span><span class="s3">, </span><span class="s4">'dsplit'</span><span class="s3">, </span><span class="s4">'dstack'</span><span class="s3">, </span><span class="s4">'dtype'</span><span class="s3">, </span><span class="s4">'dump'</span><span class="s3">, </span><span class="s4">'dumps'</span><span class="s3">, </span><span class="s4">'ediff1d'</span><span class="s3">, </span><span class="s4">'empty'</span><span class="s3">,</span>
        <span class="s4">'empty_like'</span><span class="s3">, </span><span class="s4">'equal'</span><span class="s3">, </span><span class="s4">'exp'</span><span class="s3">, </span><span class="s4">'expand_dims'</span><span class="s3">, </span><span class="s4">'expm1'</span><span class="s3">, </span><span class="s4">'extract'</span><span class="s3">, </span><span class="s4">'eye'</span><span class="s3">,</span>
        <span class="s4">'fabs'</span><span class="s3">, </span><span class="s4">'fastCopyAndTranspose'</span><span class="s3">, </span><span class="s4">'fft'</span><span class="s3">, </span><span class="s4">'fftfreq'</span><span class="s3">, </span><span class="s4">'fftshift'</span><span class="s3">, </span><span class="s4">'fill'</span><span class="s3">,</span>
        <span class="s4">'finfo'</span><span class="s3">, </span><span class="s4">'fix'</span><span class="s3">, </span><span class="s4">'flat'</span><span class="s3">, </span><span class="s4">'flatnonzero'</span><span class="s3">, </span><span class="s4">'flatten'</span><span class="s3">, </span><span class="s4">'fliplr'</span><span class="s3">, </span><span class="s4">'flipud'</span><span class="s3">,</span>
        <span class="s4">'floor'</span><span class="s3">, </span><span class="s4">'floor_divide'</span><span class="s3">, </span><span class="s4">'fmod'</span><span class="s3">, </span><span class="s4">'frexp'</span><span class="s3">, </span><span class="s4">'fromarrays'</span><span class="s3">, </span><span class="s4">'frombuffer'</span><span class="s3">,</span>
        <span class="s4">'fromfile'</span><span class="s3">, </span><span class="s4">'fromfunction'</span><span class="s3">, </span><span class="s4">'fromiter'</span><span class="s3">, </span><span class="s4">'frompyfunc'</span><span class="s3">, </span><span class="s4">'fromstring'</span><span class="s3">,</span>
        <span class="s4">'generic'</span><span class="s3">, </span><span class="s4">'get_array_wrap'</span><span class="s3">, </span><span class="s4">'get_include'</span><span class="s3">, </span><span class="s4">'get_numarray_include'</span><span class="s3">,</span>
        <span class="s4">'get_numpy_include'</span><span class="s3">, </span><span class="s4">'get_printoptions'</span><span class="s3">, </span><span class="s4">'getbuffer'</span><span class="s3">, </span><span class="s4">'getbufsize'</span><span class="s3">,</span>
        <span class="s4">'geterr'</span><span class="s3">, </span><span class="s4">'geterrcall'</span><span class="s3">, </span><span class="s4">'geterrobj'</span><span class="s3">, </span><span class="s4">'getfield'</span><span class="s3">, </span><span class="s4">'gradient'</span><span class="s3">, </span><span class="s4">'greater'</span><span class="s3">,</span>
        <span class="s4">'greater_equal'</span><span class="s3">, </span><span class="s4">'gumbel'</span><span class="s3">, </span><span class="s4">'hamming'</span><span class="s3">, </span><span class="s4">'hanning'</span><span class="s3">, </span><span class="s4">'histogram'</span><span class="s3">,</span>
        <span class="s4">'histogram2d'</span><span class="s3">, </span><span class="s4">'histogramdd'</span><span class="s3">, </span><span class="s4">'hsplit'</span><span class="s3">, </span><span class="s4">'hstack'</span><span class="s3">, </span><span class="s4">'hypot'</span><span class="s3">, </span><span class="s4">'i0'</span><span class="s3">,</span>
        <span class="s4">'identity'</span><span class="s3">, </span><span class="s4">'ifft'</span><span class="s3">, </span><span class="s4">'imag'</span><span class="s3">, </span><span class="s4">'index_exp'</span><span class="s3">, </span><span class="s4">'indices'</span><span class="s3">, </span><span class="s4">'inf'</span><span class="s3">, </span><span class="s4">'info'</span><span class="s3">,</span>
        <span class="s4">'inner'</span><span class="s3">, </span><span class="s4">'insert'</span><span class="s3">, </span><span class="s4">'int_asbuffer'</span><span class="s3">, </span><span class="s4">'interp'</span><span class="s3">, </span><span class="s4">'intersect1d'</span><span class="s3">,</span>
        <span class="s4">'intersect1d_nu'</span><span class="s3">, </span><span class="s4">'inv'</span><span class="s3">, </span><span class="s4">'invert'</span><span class="s3">, </span><span class="s4">'iscomplex'</span><span class="s3">, </span><span class="s4">'iscomplexobj'</span><span class="s3">,</span>
        <span class="s4">'isfinite'</span><span class="s3">, </span><span class="s4">'isfortran'</span><span class="s3">, </span><span class="s4">'isinf'</span><span class="s3">, </span><span class="s4">'isnan'</span><span class="s3">, </span><span class="s4">'isneginf'</span><span class="s3">, </span><span class="s4">'isposinf'</span><span class="s3">,</span>
        <span class="s4">'isreal'</span><span class="s3">, </span><span class="s4">'isrealobj'</span><span class="s3">, </span><span class="s4">'isscalar'</span><span class="s3">, </span><span class="s4">'issctype'</span><span class="s3">, </span><span class="s4">'issubclass_'</span><span class="s3">,</span>
        <span class="s4">'issubdtype'</span><span class="s3">, </span><span class="s4">'issubsctype'</span><span class="s3">, </span><span class="s4">'item'</span><span class="s3">, </span><span class="s4">'itemset'</span><span class="s3">, </span><span class="s4">'iterable'</span><span class="s3">, </span><span class="s4">'ix_'</span><span class="s3">,</span>
        <span class="s4">'kaiser'</span><span class="s3">, </span><span class="s4">'kron'</span><span class="s3">, </span><span class="s4">'ldexp'</span><span class="s3">, </span><span class="s4">'left_shift'</span><span class="s3">, </span><span class="s4">'less'</span><span class="s3">, </span><span class="s4">'less_equal'</span><span class="s3">, </span><span class="s4">'lexsort'</span><span class="s3">,</span>
        <span class="s4">'linspace'</span><span class="s3">, </span><span class="s4">'load'</span><span class="s3">, </span><span class="s4">'loads'</span><span class="s3">, </span><span class="s4">'loadtxt'</span><span class="s3">, </span><span class="s4">'log'</span><span class="s3">, </span><span class="s4">'log10'</span><span class="s3">, </span><span class="s4">'log1p'</span><span class="s3">, </span><span class="s4">'log2'</span><span class="s3">,</span>
        <span class="s4">'logical_and'</span><span class="s3">, </span><span class="s4">'logical_not'</span><span class="s3">, </span><span class="s4">'logical_or'</span><span class="s3">, </span><span class="s4">'logical_xor'</span><span class="s3">, </span><span class="s4">'logspace'</span><span class="s3">,</span>
        <span class="s4">'lstsq'</span><span class="s3">, </span><span class="s4">'mat'</span><span class="s3">, </span><span class="s4">'matrix'</span><span class="s3">, </span><span class="s4">'max'</span><span class="s3">, </span><span class="s4">'maximum'</span><span class="s3">, </span><span class="s4">'maximum_sctype'</span><span class="s3">,</span>
        <span class="s4">'may_share_memory'</span><span class="s3">, </span><span class="s4">'mean'</span><span class="s3">, </span><span class="s4">'median'</span><span class="s3">, </span><span class="s4">'meshgrid'</span><span class="s3">, </span><span class="s4">'mgrid'</span><span class="s3">, </span><span class="s4">'min'</span><span class="s3">,</span>
        <span class="s4">'minimum'</span><span class="s3">, </span><span class="s4">'mintypecode'</span><span class="s3">, </span><span class="s4">'mod'</span><span class="s3">, </span><span class="s4">'modf'</span><span class="s3">, </span><span class="s4">'msort'</span><span class="s3">, </span><span class="s4">'multiply'</span><span class="s3">, </span><span class="s4">'nan'</span><span class="s3">,</span>
        <span class="s4">'nan_to_num'</span><span class="s3">, </span><span class="s4">'nanargmax'</span><span class="s3">, </span><span class="s4">'nanargmin'</span><span class="s3">, </span><span class="s4">'nanmax'</span><span class="s3">, </span><span class="s4">'nanmin'</span><span class="s3">, </span><span class="s4">'nansum'</span><span class="s3">,</span>
        <span class="s4">'ndenumerate'</span><span class="s3">, </span><span class="s4">'ndim'</span><span class="s3">, </span><span class="s4">'ndindex'</span><span class="s3">, </span><span class="s4">'negative'</span><span class="s3">, </span><span class="s4">'newaxis'</span><span class="s3">, </span><span class="s4">'newbuffer'</span><span class="s3">,</span>
        <span class="s4">'newbyteorder'</span><span class="s3">, </span><span class="s4">'nonzero'</span><span class="s3">, </span><span class="s4">'not_equal'</span><span class="s3">, </span><span class="s4">'obj2sctype'</span><span class="s3">, </span><span class="s4">'ogrid'</span><span class="s3">, </span><span class="s4">'ones'</span><span class="s3">,</span>
        <span class="s4">'ones_like'</span><span class="s3">, </span><span class="s4">'outer'</span><span class="s3">, </span><span class="s4">'permutation'</span><span class="s3">, </span><span class="s4">'piecewise'</span><span class="s3">, </span><span class="s4">'pinv'</span><span class="s3">, </span><span class="s4">'pkgload'</span><span class="s3">,</span>
        <span class="s4">'place'</span><span class="s3">, </span><span class="s4">'poisson'</span><span class="s3">, </span><span class="s4">'poly'</span><span class="s3">, </span><span class="s4">'poly1d'</span><span class="s3">, </span><span class="s4">'polyadd'</span><span class="s3">, </span><span class="s4">'polyder'</span><span class="s3">, </span><span class="s4">'polydiv'</span><span class="s3">,</span>
        <span class="s4">'polyfit'</span><span class="s3">, </span><span class="s4">'polyint'</span><span class="s3">, </span><span class="s4">'polymul'</span><span class="s3">, </span><span class="s4">'polysub'</span><span class="s3">, </span><span class="s4">'polyval'</span><span class="s3">, </span><span class="s4">'power'</span><span class="s3">, </span><span class="s4">'prod'</span><span class="s3">,</span>
        <span class="s4">'product'</span><span class="s3">, </span><span class="s4">'ptp'</span><span class="s3">, </span><span class="s4">'put'</span><span class="s3">, </span><span class="s4">'putmask'</span><span class="s3">, </span><span class="s4">'r_'</span><span class="s3">, </span><span class="s4">'randint'</span><span class="s3">, </span><span class="s4">'random_integers'</span><span class="s3">,</span>
        <span class="s4">'random_sample'</span><span class="s3">, </span><span class="s4">'ranf'</span><span class="s3">, </span><span class="s4">'rank'</span><span class="s3">, </span><span class="s4">'ravel'</span><span class="s3">, </span><span class="s4">'real'</span><span class="s3">, </span><span class="s4">'real_if_close'</span><span class="s3">,</span>
        <span class="s4">'recarray'</span><span class="s3">, </span><span class="s4">'reciprocal'</span><span class="s3">, </span><span class="s4">'reduce'</span><span class="s3">, </span><span class="s4">'remainder'</span><span class="s3">, </span><span class="s4">'repeat'</span><span class="s3">, </span><span class="s4">'require'</span><span class="s3">,</span>
        <span class="s4">'reshape'</span><span class="s3">, </span><span class="s4">'resize'</span><span class="s3">, </span><span class="s4">'restoredot'</span><span class="s3">, </span><span class="s4">'right_shift'</span><span class="s3">, </span><span class="s4">'rint'</span><span class="s3">, </span><span class="s4">'roll'</span><span class="s3">,</span>
        <span class="s4">'rollaxis'</span><span class="s3">, </span><span class="s4">'roots'</span><span class="s3">, </span><span class="s4">'rot90'</span><span class="s3">, </span><span class="s4">'round'</span><span class="s3">, </span><span class="s4">'round_'</span><span class="s3">, </span><span class="s4">'row_stack'</span><span class="s3">, </span><span class="s4">'s_'</span><span class="s3">,</span>
        <span class="s4">'sample'</span><span class="s3">, </span><span class="s4">'savetxt'</span><span class="s3">, </span><span class="s4">'sctype2char'</span><span class="s3">, </span><span class="s4">'searchsorted'</span><span class="s3">, </span><span class="s4">'seed'</span><span class="s3">, </span><span class="s4">'select'</span><span class="s3">,</span>
        <span class="s4">'set_numeric_ops'</span><span class="s3">, </span><span class="s4">'set_printoptions'</span><span class="s3">, </span><span class="s4">'set_string_function'</span><span class="s3">,</span>
        <span class="s4">'setbufsize'</span><span class="s3">, </span><span class="s4">'setdiff1d'</span><span class="s3">, </span><span class="s4">'seterr'</span><span class="s3">, </span><span class="s4">'seterrcall'</span><span class="s3">, </span><span class="s4">'seterrobj'</span><span class="s3">,</span>
        <span class="s4">'setfield'</span><span class="s3">, </span><span class="s4">'setflags'</span><span class="s3">, </span><span class="s4">'setmember1d'</span><span class="s3">, </span><span class="s4">'setxor1d'</span><span class="s3">, </span><span class="s4">'shape'</span><span class="s3">,</span>
        <span class="s4">'show_config'</span><span class="s3">, </span><span class="s4">'shuffle'</span><span class="s3">, </span><span class="s4">'sign'</span><span class="s3">, </span><span class="s4">'signbit'</span><span class="s3">, </span><span class="s4">'sin'</span><span class="s3">, </span><span class="s4">'sinc'</span><span class="s3">, </span><span class="s4">'sinh'</span><span class="s3">,</span>
        <span class="s4">'size'</span><span class="s3">, </span><span class="s4">'slice'</span><span class="s3">, </span><span class="s4">'solve'</span><span class="s3">, </span><span class="s4">'sometrue'</span><span class="s3">, </span><span class="s4">'sort'</span><span class="s3">, </span><span class="s4">'sort_complex'</span><span class="s3">, </span><span class="s4">'source'</span><span class="s3">,</span>
        <span class="s4">'split'</span><span class="s3">, </span><span class="s4">'sqrt'</span><span class="s3">, </span><span class="s4">'square'</span><span class="s3">, </span><span class="s4">'squeeze'</span><span class="s3">, </span><span class="s4">'standard_normal'</span><span class="s3">, </span><span class="s4">'std'</span><span class="s3">,</span>
        <span class="s4">'subtract'</span><span class="s3">, </span><span class="s4">'sum'</span><span class="s3">, </span><span class="s4">'svd'</span><span class="s3">, </span><span class="s4">'swapaxes'</span><span class="s3">, </span><span class="s4">'take'</span><span class="s3">, </span><span class="s4">'tan'</span><span class="s3">, </span><span class="s4">'tanh'</span><span class="s3">, </span><span class="s4">'tensordot'</span><span class="s3">,</span>
        <span class="s4">'test'</span><span class="s3">, </span><span class="s4">'tile'</span><span class="s3">, </span><span class="s4">'tofile'</span><span class="s3">, </span><span class="s4">'tolist'</span><span class="s3">, </span><span class="s4">'tostring'</span><span class="s3">, </span><span class="s4">'trace'</span><span class="s3">, </span><span class="s4">'transpose'</span><span class="s3">,</span>
        <span class="s4">'trapz'</span><span class="s3">, </span><span class="s4">'tri'</span><span class="s3">, </span><span class="s4">'tril'</span><span class="s3">, </span><span class="s4">'trim_zeros'</span><span class="s3">, </span><span class="s4">'triu'</span><span class="s3">, </span><span class="s4">'true_divide'</span><span class="s3">, </span><span class="s4">'typeDict'</span><span class="s3">,</span>
        <span class="s4">'typename'</span><span class="s3">, </span><span class="s4">'uniform'</span><span class="s3">, </span><span class="s4">'union1d'</span><span class="s3">, </span><span class="s4">'unique'</span><span class="s3">, </span><span class="s4">'unique1d'</span><span class="s3">, </span><span class="s4">'unravel_index'</span><span class="s3">,</span>
        <span class="s4">'unwrap'</span><span class="s3">, </span><span class="s4">'vander'</span><span class="s3">, </span><span class="s4">'var'</span><span class="s3">, </span><span class="s4">'vdot'</span><span class="s3">, </span><span class="s4">'vectorize'</span><span class="s3">, </span><span class="s4">'view'</span><span class="s3">, </span><span class="s4">'vonmises'</span><span class="s3">,</span>
        <span class="s4">'vsplit'</span><span class="s3">, </span><span class="s4">'vstack'</span><span class="s3">, </span><span class="s4">'weibull'</span><span class="s3">, </span><span class="s4">'where'</span><span class="s3">, </span><span class="s4">'who'</span><span class="s3">, </span><span class="s4">'zeros'</span><span class="s3">, </span><span class="s4">'zeros_like'</span>
    <span class="s3">}</span>

    <span class="s2">def </span><span class="s1">get_tokens_unprocessed</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">text</span><span class="s3">):</span>
        <span class="s2">for </span><span class="s1">index</span><span class="s3">, </span><span class="s1">token</span><span class="s3">, </span><span class="s1">value </span><span class="s2">in </span><span class="s1">\</span>
                <span class="s1">PythonLexer</span><span class="s3">.</span><span class="s1">get_tokens_unprocessed</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">text</span><span class="s3">):</span>
            <span class="s2">if </span><span class="s1">token </span><span class="s2">is </span><span class="s1">Name </span><span class="s2">and </span><span class="s1">value </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">EXTRA_KEYWORDS</span><span class="s3">:</span>
                <span class="s2">yield </span><span class="s1">index</span><span class="s3">, </span><span class="s1">Keyword</span><span class="s3">.</span><span class="s1">Pseudo</span><span class="s3">, </span><span class="s1">value</span>
            <span class="s2">else</span><span class="s3">:</span>
                <span class="s2">yield </span><span class="s1">index</span><span class="s3">, </span><span class="s1">token</span><span class="s3">, </span><span class="s1">value</span>

    <span class="s2">def </span><span class="s1">analyse_text</span><span class="s3">(</span><span class="s1">text</span><span class="s3">):</span>
        <span class="s1">ltext </span><span class="s3">= </span><span class="s1">text</span><span class="s3">[:</span><span class="s6">1000</span><span class="s3">]</span>
        <span class="s2">return </span><span class="s3">(</span><span class="s1">shebang_matches</span><span class="s3">(</span><span class="s1">text</span><span class="s3">, </span><span class="s4">r'pythonw?(3(\.\d)?)?'</span><span class="s3">) </span><span class="s2">or</span>
                <span class="s4">'import ' </span><span class="s2">in </span><span class="s1">ltext</span><span class="s3">) </span><span class="s1">\</span>
            <span class="s2">and </span><span class="s3">(</span><span class="s4">'import numpy' </span><span class="s2">in </span><span class="s1">ltext </span><span class="s2">or </span><span class="s4">'from numpy import' </span><span class="s2">in </span><span class="s1">ltext</span><span class="s3">)</span>
</pre>
</body>
</html>